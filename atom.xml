<?xml version="1.0" encoding="utf-8"?>


<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN">
    <title type="text">JJMeg&#39;s blog</title>
    <subtitle type="html">MemE æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”å¯é«˜åº¦å®šåˆ¶çš„ GoHugo åšå®¢ä¸»é¢˜ï¼Œä¸“ä¸ºä¸ªäººåšå®¢è®¾è®¡ã€‚</subtitle>
    <updated>2020-05-05T23:04:59+08:00</updated>
    <id>https://jjmeg.github.io/</id>
    <link rel="alternate" type="text/html" href="https://jjmeg.github.io/" />
    <link rel="self" type="application/atom+xml" href="https://jjmeg.github.io/atom.xml" />
    <author>
            <name>JJMeg</name>
            <uri>https://jjmeg.github.io/</uri>
            
                <email>jjmeg.he@gmail.com</email>
            </author>
    <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    <generator uri="https://gohugo.io/" version="0.62.1">Hugo</generator>
        <entry>
            <title type="text">Goå®ç°ä¸€ä¸ªæ”¯æŒåŠ¨æ€æ‰©å®¹çš„æ•°ç»„</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/buffered-array/" />
            <id>https://jjmeg.github.io/posts/buffered-array/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2020-01-21T16:14:25+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ã€Œ æ•°ç»„ ã€ ä¸€æ—¦åˆ†é…ç©ºé—´ï¼Œä¸å¯å†æ›´æ”¹ï¼Œå®¹é‡é™å®šï¼Œå¯èƒ½å­˜åœ¨è®¿é—®è¶Šç•Œé£é™©ã€‚ åœ¨æ­¤å®ç°æ”¯æŒåŠ¨æ€æ‰©â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<p><center>ã€Œ æ•°ç»„ ã€</center>
<center>ä¸€æ—¦åˆ†é…ç©ºé—´ï¼Œä¸å¯å†æ›´æ”¹ï¼Œå®¹é‡é™å®šï¼Œå¯èƒ½å­˜åœ¨è®¿é—®è¶Šç•Œé£é™©ã€‚</center></p>

<hr />

<p>åœ¨æ­¤å®ç°æ”¯æŒåŠ¨æ€æ‰©å®¹çš„æ•°ç»„ï¼Œèƒ½å®ŒæˆåŸºæœ¬çš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œå…¶æ•°æ®ç»“æ„å®šä¹‰åŠæ„é€ å‡½æ•°å¦‚ä¸‹ï¼Œä½¿ç”¨æ•°ç»„ <code>Data</code> ä¿å­˜æ•°æ®ï¼Œç”¨ <code>Size</code> è®°å½•å½“å‰å·²ä¿å­˜çš„æ•°æ®çš„ä¸ªæ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">MyArray</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Data</span> <span class="p">[</span><span class="p">]</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span>
	<span class="nx">Size</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">NewMyArray</span><span class="p">(</span><span class="nx">size</span> <span class="kt">int</span><span class="p">)</span> <span class="o">*</span><span class="nx">MyArray</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">size</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">nil</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">MyArray</span><span class="p">{</span>
		<span class="nb">make</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">,</span> <span class="nx">size</span><span class="p">)</span><span class="p">,</span>
		<span class="nx">size</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="å¿«é€Ÿè®¿é—®">ğŸ“œå¿«é€Ÿè®¿é—®</h3>

<ul>
<li>ğŸ“š<a href="#å¢">å¢</a></li>
<li>ğŸ“š<a href="#åˆ ">åˆ </a></li>
<li>ğŸ“š<a href="#æ”¹">æ”¹</a></li>
<li>ğŸ“š<a href="#æŸ¥">æŸ¥</a></li>
<li>ğŸ“š<a href="#å…¶ä»–">å…¶ä»–</a></li>
</ul>

<h3 id="å¢">å¢</h3>

<p><code>MyArray</code> å†…çš„ <code>Data</code> æœ¬è´¨æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨æ’å…¥æ•°æ®æ—¶ï¼Œè¦è€ƒè™‘ <code>Data</code> æ˜¯å¦è¿˜æœ‰å¤šä½™çš„ç©ºé—´ä¿å­˜æ•°æ®ï¼Œå½“ç©ºé—´ä¸å¤Ÿæ—¶ï¼Œæˆ‘ä»¬å¯¹å…¶è¿›è¡Œæ‰©å®¹ã€‚æ‰©å®¹æ—¶ï¼Œå°†å®¹é‡ç¿»å€ï¼Œå³ç”³è¯·ä¸€æ®µæ–°çš„è¿ç»­å†…å­˜ï¼Œå°†å·²æœ‰çš„æ•°æ®ä¿å­˜åˆ°æ–°çš„å†…å­˜ç©ºé—´ä¸­ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">resize</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">newArray</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="nx">m</span><span class="p">.</span><span class="nx">Size</span><span class="p">)</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Size</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">newArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
	<span class="p">}</span>
	<span class="nx">m</span><span class="p">.</span><span class="nx">Data</span> <span class="p">=</span> <span class="nx">newArray</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><code>Data</code> çš„æœ€å¤§å®¹é‡ä¸º <code>len(Data)</code> ï¼Œæ·»åŠ å•ä¸ªæˆ–å¤šä¸ªæ•°æ®æ—¶ï¼Œæ¯”å¯¹ <code>Size</code> å’Œæœ€å¤§å®¹é‡å¾—çŸ¥æ˜¯å¦è¦æ‰©å®¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">AddItem</span><span class="p">(</span><span class="nx">item</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">)</span> <span class="o">==</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Size</span> <span class="p">{</span>
		<span class="nx">m</span><span class="p">.</span><span class="nf">resize</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">[</span><span class="nx">m</span><span class="p">.</span><span class="nx">Size</span><span class="p">]</span> <span class="p">=</span> <span class="nx">item</span>
	<span class="nx">m</span><span class="p">.</span><span class="nx">Size</span><span class="o">++</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">AddItems</span><span class="p">(</span><span class="nx">items</span> <span class="o">...</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">for</span> <span class="nx">item</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">items</span> <span class="p">{</span>
		<span class="nx">m</span><span class="p">.</span><span class="nf">AddItem</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="åˆ ">åˆ </h3>

<p>åˆ é™¤æ“ä½œæœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ é™¤å…·ä½“æ•°æ®ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªç›¸åŒçš„æ•°æ®ï¼Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="c1">// åˆ 
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">Remove</span><span class="p">(</span><span class="nx">target</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">newArray</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">)</span><span class="p">)</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Size</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!=</span> <span class="nx">target</span> <span class="p">{</span>
			<span class="nx">newArray</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">newArray</span><span class="p">,</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>ä»¥åŠåˆ é™¤æ•°ç»„æŒ‡å®šä¸‹æ ‡çš„æ•°æ®ï¼Œåœ¨åˆ é™¤å‰ï¼Œè¦æ£€æŸ¥ä¸‹æ ‡æ˜¯å¦åˆæ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">RemoveWithIndex</span><span class="p">(</span><span class="nx">index</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">index</span> <span class="p">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">index</span> <span class="p">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">)</span> <span class="p">{</span>
		<span class="nb">panic</span><span class="p">(</span><span class="s">&#34;Illegal index.&#34;</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">newArray</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">)</span><span class="p">)</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Size</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">i</span> <span class="o">!=</span> <span class="nx">index</span> <span class="p">{</span>
			<span class="nx">newArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="nx">m</span><span class="p">.</span><span class="nx">Data</span> <span class="p">=</span> <span class="nx">newArray</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="æ”¹">æ”¹</h3>

<p>ä¿®æ”¹ä¸€èˆ¬æ˜¯å¯¹æŒ‡å®šä¸‹æ ‡çš„æ•°æ®åšä¿®æ”¹ï¼Œç±»ä¼¼åˆ é™¤ï¼Œä¹Ÿéœ€è¦åšä¸‹æ ‡åˆæ³•æ£€æŸ¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">Set</span><span class="p">(</span><span class="nx">index</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">item</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">index</span> <span class="p">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">index</span> <span class="p">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">)</span> <span class="p">{</span>
		<span class="nb">panic</span><span class="p">(</span><span class="s">&#34;Illegal index.&#34;</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="p">=</span> <span class="nx">item</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="æŸ¥">æŸ¥</h3>

<p>æŸ¥æ‰¾æ”¯æŒæŸ¥æ‰¾å•ä¸ªå’ŒæŸ¥æ‰¾å¤šä¸ªï¼Œæ ¹æ®æ•°æ®å†…å®¹æŸ¥æ‰¾å¯¹åº”çš„æ•°ç»„ä¸‹æ ‡ï¼Œå¹¶åˆ©ç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¸­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">FindItem</span><span class="p">(</span><span class="nx">target</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Size</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="nx">target</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">i</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">FindAllItems</span><span class="p">(</span><span class="nx">target</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="p">(</span><span class="nx">result</span> <span class="p">[</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Size</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="nx">target</span> <span class="p">{</span>
			<span class="nx">result</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">Contains</span><span class="p">(</span><span class="nx">target</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">m</span><span class="p">.</span><span class="nf">FindItem</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">false</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>æ ¹æ®æ•°ç»„ä¸‹æ ‡æŸ¥æ‰¾å…·ä½“çš„æ•°æ®ï¼Œæ‰¹é‡æŸ¥æ‰¾åº”ä»¥åˆ—è¡¨çš„å½¢å¼è¿”å›ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">GetItem</span><span class="p">(</span><span class="nx">index</span> <span class="kt">int</span><span class="p">)</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">index</span> <span class="p">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">)</span> <span class="o">||</span> <span class="nx">index</span> <span class="p">&lt;</span> <span class="mi">0</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">nil</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">GetItems</span><span class="p">(</span><span class="nx">indexes</span> <span class="o">...</span><span class="kt">int</span><span class="p">)</span> <span class="p">[</span><span class="p">]</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span> <span class="p">{</span>
	<span class="nx">result</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">indexes</span><span class="p">)</span><span class="p">)</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">indexes</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Size</span> <span class="p">{</span>
			<span class="nx">result</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="nx">result</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="å…¶ä»–">å…¶ä»–</h3>

<p>è·å–æœ€å¤§å®¹é‡åŠå½“å‰å®¹é‡ï¼Œä½¿ç”¨å½“å‰å®¹é‡åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">GetCapacity</span><span class="p">(</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">Data</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">GetSize</span><span class="p">(</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Size</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MyArray</span><span class="p">)</span> <span class="nf">IsEmpty</span><span class="p">(</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Size</span> <span class="o">==</span> <span class="mi">0</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/%E6%95%B0%E7%BB%84/" term="æ•°ç»„" label="æ•°ç»„" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" term="æ•°æ®ç»“æ„" label="æ•°æ®ç»“æ„" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Golangæºç é˜…è¯» - channel å’Œ selectï¼ˆä¸€ï¼‰</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/golang-channel-and-select/" />
            <id>https://jjmeg.github.io/posts/golang-channel-and-select/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2020-01-14T11:25:07+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ã€Œ channel å’Œ select ã€ Go æä¾› channel æ¨¡å‹å®ç°åŒæ­¥ã€‚ å®ç°åŒæ­¥çš„ä¸¤ä¸ªæ€è·¯ï¼šå…±äº«å†…å­˜ã€æ¶ˆæ¯é€šä¿¡ï¼ˆå†…å­˜æ‹·è´ï¼‰ï¼Œâ€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<p><center>ã€Œ channel å’Œ select ã€</center>
<center>Go æä¾› channel æ¨¡å‹å®ç°åŒæ­¥ã€‚</center></p>

<p style="text-indent:2em">å®ç°åŒæ­¥çš„ä¸¤ä¸ªæ€è·¯ï¼šå…±äº«å†…å­˜ã€æ¶ˆæ¯é€šä¿¡ï¼ˆå†…å­˜æ‹·è´ï¼‰ï¼Œå…±äº«å†…å­˜é€šå¸¸é€šè¿‡é”æœºåˆ¶å®ç°ï¼Œæ¶ˆæ¯é€šä¿¡åˆ™åŸºäº [CSPç†è®º](http://www.usingcsp.com/cspbook.pdf)ã€‚</p>

<p style="text-indent:2em">go æ˜¾ç¤ºä½¿ç”¨ channel ï¼Œéœ€è¦ç¨‹åºå‘˜æ˜¾ç¤ºçš„åˆ†é…æ¶ˆæ¯é€šé“ï¼Œchannel åˆ†ä¸ºæ— ç¼“å†²çš„å’Œç¼“å†²ä¸¤ç§ç±»å‹ã€‚åœ¨äº†è§£ channel å†…éƒ¨å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ go è¯­è¨€çš„è°ƒåº¦æ¨¡å‹ã€‚</p>

<p>go çš„è°ƒåº¦æ¨¡å‹ GPM æ¨¡å‹ï¼š</p>

<ul>
<li>G - goroutineï¼ŒGlobal é˜Ÿåˆ—å­˜æ”¾ G</li>
<li>P - processerï¼Œé€»è¾‘å¤„ç†å™¨ï¼ŒP çš„ local é˜Ÿåˆ—ä¹Ÿå­˜æ”¾ G</li>
<li>M - machineï¼Œå®é™…è¿è¡Œ golang ç¨‹åºä½œä¸š</li>
</ul>

<p><p style="text-indent:2em">M å®é™…è¿è¡Œè¦ç»‘å®šä¸€ä¸ª P ï¼ŒP ç±»ä¼¼ä¸€ä¸ªå­˜æ”¾èµ„æºçš„é˜Ÿåˆ—ï¼ŒP çš„ local é˜Ÿåˆ—å†…å­˜æ”¾ G ã€‚M ä¸ P ç»‘å®šï¼Œä¸æ–­ä» P çš„ local é˜Ÿåˆ—å†…å– G(æ— é”æ“ä½œ)ï¼Œåˆ‡æ¢åˆ° G çš„å †æ ˆæ‰§è¡Œï¼Œè‹¥æ²¡æœ‰äº† Gï¼Œåˆ™ä» Global é˜Ÿåˆ—å†…å– G (æœ‰é”æ“ä½œ)ï¼Œå¯èƒ½ä¼šå–ä¸€æ‰¹åˆ° P çš„ local é˜Ÿåˆ—å†…ï¼Œè‹¥ Global å†…ä¹Ÿæ²¡æœ‰ G ï¼Œåˆ™å°è¯•ä»å…¶ä»– P ä¸­çªƒå– G ï¼Œä¸€èˆ¬çªƒå–ä¸€åŠï¼Œå½“æ²¡æœ‰ G æ—¶ï¼Œ M å’Œ P è§£ç»‘ï¼Œè¿›å…¥ä¼‘çœ ã€‚</p>
<img src="/images/channel-select/go-scheduler.png" alt="go-scheduler.png" /></p>

<h3 id="channelæ•°æ®ç»“æ„">channelæ•°æ®ç»“æ„</h3>

<p><code>src/runtime/chan.go</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">hchan</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">qcount</span>   <span class="kt">uint</span>           <span class="c1">// é˜Ÿåˆ—ä¸­çš„æ•°æ®çš„é‡
</span><span class="c1"></span>	<span class="nx">dataqsiz</span> <span class="kt">uint</span>           <span class="c1">// ç¯å½¢é˜Ÿåˆ—çš„å¤§å°
</span><span class="c1"></span>	<span class="nx">buf</span>      <span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span> <span class="c1">// æŒ‡å‘ dataqsiz å¤§å°çš„çš„æ•°ç»„
</span><span class="c1"></span>	<span class="nx">elemsize</span> <span class="kt">uint16</span> <span class="c1">// å…ƒç´ å¤§å°
</span><span class="c1"></span>	<span class="nx">closed</span>   <span class="kt">uint32</span> <span class="c1">// æ˜¯å¦å…³é—­
</span><span class="c1"></span>	<span class="nx">elemtype</span> <span class="o">*</span><span class="nx">_type</span> <span class="c1">// å…ƒç´ ç±»å‹
</span><span class="c1"></span>	<span class="nx">sendx</span>    <span class="kt">uint</span>   <span class="c1">// å‘é€ç´¢å¼•
</span><span class="c1"></span>	<span class="nx">recvx</span>    <span class="kt">uint</span>   <span class="c1">// æ¥æ”¶ç´¢å¼•
</span><span class="c1"></span>	<span class="nx">recvq</span>    <span class="nx">waitq</span>  <span class="c1">// æ¥æ”¶åˆ—è¡¨å³ &lt;-chan
</span><span class="c1"></span>	<span class="nx">sendq</span>    <span class="nx">waitq</span>  <span class="c1">// å‘é€åˆ—è¡¨å³ ch&lt;-
</span><span class="c1"></span>
	<span class="nx">lock</span> <span class="nx">mutex</span>
	<span class="c1">// lockä¿æŠ¤ hchan ç»“æ„ä½“å†…çš„æ‰€æœ‰å­—æ®µï¼Œä»¥åŠ waitq å†…çš„ sudogï¼Œ
</span><span class="c1"></span>	<span class="c1">// åœ¨æŒæœ‰è¯¥é”æ—¶ï¼Œä¸è¦æ”¹å˜ G çš„çŠ¶æ€ï¼Œå› ä¸ºåœ¨æ ˆæ”¶ç¼©æ—¶ä¼šæ­»é”
</span><span class="c1"></span><span class="p">}</span>


<span class="kd">type</span> <span class="nx">waitq</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">first</span> <span class="o">*</span><span class="nx">sudog</span>
	<span class="nx">last</span>  <span class="o">*</span><span class="nx">sudog</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><code>waitq</code> æ˜¯ç­‰å¾…é˜Ÿåˆ—å’Œå‘é€é˜Ÿåˆ—çš„åŒ…è£…ï¼ŒåŒ…è£…äº†å½“å‰ goroutine çš„æŒ‡é’ˆï¼Œå³ <code>waitq</code> æŒ‡å‘äº†ä¸€ä¸ª goroutine æŒ‡é’ˆé˜Ÿåˆ—ï¼Œæ˜¯ä¸€ä¸ªåŒå‘é˜Ÿåˆ—ã€‚åˆå§‹åŒ–å¸¦ç¼“å†²çš„ hchan æ—¶ï¼š
<img src="/images/channel-select/channel-select-new.png" alt="channel-select-new.png" />
å¦‚ä¸Šå›¾ï¼Œåˆå§‹åŒ–ä¸€ä¸ªæœ‰ 4 ä¸ªç¼“å†²åŒºçš„é€šé“ï¼Œ<code>buf</code> æŒ‡å‘ä¸€ä¸ªæœ‰ç•Œæ•°ç»„ï¼Œ<code>sendx</code> è¡¨ç¤ºä¸‹ä¸€æ¬¡å‘é€æ•°æ®æ—¶è¦è®¿é—® <code>buf</code> æ•°ç»„çš„ä¸‹æ ‡ï¼Œ<code>recvx</code> åˆ™è¡¨ç¤ºä¸‹ä¸€æ¬¡æ¥æ”¶æ•°æ®æ—¶è¦è®¿é—®çš„ä¸‹æ ‡ï¼Œ<code>recvq</code> ä¿å­˜å¾…æ¥æ”¶é€šé“æ•°æ®çš„ goroutine é“¾è¡¨ï¼Œç±»ä¼¼çš„ï¼Œ<code>sendq</code> è´Ÿè´£ä¿å­˜å‘é€æ•°æ®çš„ goroutine ã€‚</p>

<p>ä»¥æ­¤ channel ä¸ºä¾‹ï¼Œå¸¦æœ‰ 4 ä¸ªç¼“å†²åŒºï¼Œé¦–å…ˆçœ‹çœ‹ channel æ¥æ”¶æ•°æ®çš„æµç¨‹ã€‚</p>

<h5 id="channelæ¥æ”¶æ•°æ®æµç¨‹">channelæ¥æ”¶æ•°æ®æµç¨‹</h5>

<p>â‘  åç¨‹ G é¢„å¾€ channel ä¸­æ’å…¥æ•°æ® 4ï¼Œæ­¤æ—¶ <code>sendx</code> ä¸º 0ï¼Œè¡¨ç¤ºè‹¥è¦æ’å…¥æ•°æ®ï¼Œå°†æ•°æ®æ”¾åœ¨ <code>buf</code> ä¸‹æ ‡ä¸º 0 å¤„ï¼Œç¼“å†²åŒº <code>buf</code> å†…ç©ºé—´æœªæ»¡ï¼Œç›´æ¥å°† G çš„æ•°æ®æ’å…¥åˆ° <code>buf</code> å†…ï¼ŒG æºå¸¦çš„æ•°æ®æ”¾åœ¨ <code>buf[0]</code> å¤„ï¼Œ <code>sendx</code> åŠ ä¸€ï¼š
<img src="/images/channel-select/channel-select-G1.png" alt="channel-select-G1.png" /></p>

<p>â‘¡ ç¬¬äºŒä¸ªåç¨‹ G2 æºå¸¦æ•°æ®ï¼Œä¸ç¬¬ â‘  æ­¥ç±»ä¼¼ï¼Œ<code>buf</code> ç©ºé—´æœªæ»¡ï¼Œç›´æ¥æ’å…¥ï¼Œ<code>sendx</code> ç´¢å¼•åŠ ä¸€ï¼š
<img src="/images/channel-select/channel-select-G2.png" alt="channel-select-G2.png" /></p>

<p>â‘¢ å½“æ’å…¥æ•°æ®åˆ° <code>buf</code> ï¼Œ<code>buf</code>ç©ºé—´æ°å¥½æ»¡äº†ï¼Œæ­¤æ—¶ <code>sendx</code> å½’ä¸º 0ï¼Œå¦‚æ­¤è®¾è®¡è®© channel çš„ç¼“å†²åŒºæˆä¸ºä¸€ä¸ª FIFO ç±»å‹çš„é€šé“ï¼š
<img src="/images/channel-select/channel-select-G4.png" alt="channel-select-G4.png" /></p>

<p>â‘£ åç¨‹ G5 è¦æ’å…¥æ•°æ®ï¼Œä½†æ˜¯ <code>buf</code> ç©ºé—´å·²æ»¡ï¼Œåˆ™å°† G5 æ’å…¥åˆ°å‘é€æ•°æ®ç­‰å¾…é˜Ÿåˆ— <code>sendq</code>ï¼Œå³è¢«é˜»å¡ï¼Œç›´åˆ° <code>buf</code> æœ‰ç©ºé—´æ‰ä» <code>sendq</code> å–å‡º G æ’å…¥æ•°æ®:
<img src="/images/channel-select/channel-select-G5.png" alt="channel-select-G5.png" /></p>

<h5 id="channelå‘é€æ•°æ®æµç¨‹">channelå‘é€æ•°æ®æµç¨‹</h5>

<p>â‘  åç¨‹ G é¢„æ¥æ”¶æ•°æ®ï¼Œ<code>recvx</code> è¡¨ç¤º channel ä¸‹ä¸€ä¸ªè¦å‘é€çš„æ•°æ®çš„ä¸‹æ ‡ï¼Œ<code>buf</code> å†…æœ‰æ•°æ®ï¼Œchannel ç›´æ¥å°†æ•°æ®å‘é€ç»™ G ,<code>recvx</code> åŠ ä¸€ï¼š
<img src="/images/channel-select/channel-select-send-G.png" alt="channel-select-send-G.png" /></p>

<p>â‘¡ åç¨‹ G2 é¢„æ¥æ”¶æ•°æ®ï¼Œchannel æœ€åä¸€ä¸ªæ•°æ®å‘é€ç»™ G2 ï¼Œ <code>buf</code> ä¸ºç©ºï¼Œ<code>recvx</code> åº”å½’ 0ï¼š
<img src="/images/channel-select/channel-select-send-G2.png" alt="channel-select-send-G2.png" /></p>

<p>â‘¢ åç¨‹ G3 ä¹Ÿè¦æ¥æ”¶ channel çš„æ•°æ®ï¼Œä½†æ˜¯ <code>buf</code> å†…å·²æ— æ•°æ®ï¼ŒG3 åˆ™è¢«æŒ‚èµ·ï¼Œè¢«æ”¾å…¥ <code>recvq</code> é˜Ÿåˆ—å†…æ’é˜Ÿï¼š
<img src="/images/channel-select/channel-select-send-G3.png" alt="channel-select-send-G3.png" /></p>

<h5 id="æ€»ç»“">æ€»ç»“</h5>

<p>channel æ¥æ”¶æ•°æ®æ—¶è¦è€ƒè™‘ <code>buf</code> æ˜¯å¦å·²æ»¡ï¼Œå½±å“çš„æ˜¯ <code>sendx</code> å’Œ <code>sendq</code> ä¸¤ä¸ªå±æ€§ï¼Œç¼“å†²åŒºæ»¡æ—¶ï¼Œåç¨‹å…¥ <code>sendq</code> é˜Ÿåˆ—ï¼›ç±»ä¼¼çš„ï¼Œ channel å‘é€æ•°æ®æ—¶è¦è€ƒè™‘ <code>buf</code> å†…æ²¡æœ‰æ•°æ®çš„æƒ…å†µï¼Œå½±å“ <code>recvx</code> å’Œ <code>recvq</code> ä¸¤ä¸ªå±æ€§ã€‚<code>sendx</code> åŠ <code>recvx</code> çš„å˜åŒ–è§„å¾‹è¡¨æ˜ channel å­˜å–æ•°æ®çš„æ–¹å¼æ˜¯å…ˆå…¥å…ˆå‡º FIFO çš„å½¢å¼ã€‚</p>
]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/golang/" term="golang" label="golang" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/" term="æºç é˜…è¯»" label="æºç é˜…è¯»" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Mysqlå¦‚ä½•å­˜å‚¨æ•°æ®ï¼ˆä¸€ï¼‰?</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/how-mysql-store-data-i/" />
            <id>https://jjmeg.github.io/posts/how-mysql-store-data-i/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2020-01-06T14:15:32+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ã€Œ InnoDB å’Œ MyISAM ã€ InnoDB å’Œ MyISAM éƒ½æ˜¯ MySQL å¸¸ç”¨çš„å­˜å‚¨å¼•æ“ï¼Œå…¶ä¸­ InnoDB æ˜¯ MySQL é»˜è®¤å­˜å‚¨å¼•æ“å’Œæœ€å¸¸ç”¨çš„å­˜å‚¨å¼•æ“ã€‚ 1 2â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<p><center>ã€Œ InnoDB å’Œ MyISAM ã€</center>
<p style="text-indent:2em"> InnoDB å’Œ MyISAM éƒ½æ˜¯ MySQL å¸¸ç”¨çš„å­˜å‚¨å¼•æ“ï¼Œå…¶ä¸­ InnoDB æ˜¯ MySQL é»˜è®¤å­˜å‚¨å¼•æ“å’Œæœ€å¸¸ç”¨çš„å­˜å‚¨å¼•æ“ã€‚</p></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">      Engine: InnoDB
     Support: DEFAULT
     Comment: Supports transactions, row-level locking, and foreign keys
Transactions: YES
          XA: YES
  Savepoints: YES
  *************************** 1. row ***************************
      Engine: MyISAM
     Support: YES
     Comment: MyISAM storage engine
Transactions: NO
          XA: NO</code></pre></td></tr></table>
</div>
</div>
<p><strong>å®éªŒç¯å¢ƒï¼šMySQL-8.0.18.0ï¼ŒWindows-64</strong></p>

<h3 id="myisam-æ€æ ·å­˜å‚¨æ•°æ®">MyISAM æ€æ ·å­˜å‚¨æ•°æ®?</h3>

<p>åˆ›å»ºæ•°æ®åº“ <code>mydbs</code> ï¼Œå¹¶åˆ›å»ºæ•°æ®åº“è¡¨ <code>table_myisam</code> ï¼Œå¹¶æŒ‡å®š <code>engine</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mysql&gt; CREATE DATABASE mydbs<span class="p">;</span>
mysql&gt; CREATE TABLE table_myisam <span class="o">(</span>column1 CHAR<span class="o">(</span>5<span class="o">)</span><span class="o">)</span> <span class="nv">ENGINE</span><span class="o">=</span>MYISAM COMMENT <span class="s1">&#39;*&#39;</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
<p>æŸ¥æ‰¾æ•°æ®åº“è¡¨çš„å˜é‡ä¿¡æ¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mysql&gt; SHOW VARIABLES LIKE <span class="s1">&#39;datadir&#39;</span><span class="p">;</span>
+---------------+---------------------------------------------+
<span class="p">|</span> Variable_name <span class="p">|</span> Value                                       <span class="p">|</span>
+---------------+---------------------------------------------+
<span class="p">|</span> datadir       <span class="p">|</span> C:<span class="se">\P</span>rogramData<span class="se">\M</span>ySQL<span class="se">\M</span>ySQL Server 8.0<span class="se">\D</span>ata<span class="se">\ </span><span class="p">|</span>
+---------------+---------------------------------------------+</code></pre></td></tr></table>
</div>
</div>
<p>æˆ‘ä»¬åˆ°å¯¹åº”çš„ç›®å½•ä¸‹å»çœ‹çœ‹æœ‰ä»€ä¹ˆ:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">C:<span class="se">\P</span>rogramData<span class="se">\M</span>ySQL<span class="se">\M</span>ySQL Server 8.0<span class="se">\D</span>ata&gt; tree
â”œâ”€#innodb_temp
â”œâ”€mydbs
â”œâ”€mysql
â”œâ”€performance_schema
â”œâ”€sakila
â”œâ”€sys
â””â”€world</code></pre></td></tr></table>
</div>
</div>
<p>æ–°å»ºæ•°æ®åº“ <code>mydbs</code> æ—¶ï¼ŒMySQLåœ¨å­˜å‚¨æ•°æ®çš„ <code>Data</code> ç›®å½•ä¸‹æ–°å»ºäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå‘½åä¸æ•°æ®åº“è¡¨ç›¸åŒï¼Œå†è¿›å…¥çœ‹çœ‹é‡Œé¢æœ‰ä»€ä¹ˆï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">C:<span class="se">\P</span>rogramData<span class="se">\M</span>ySQL<span class="se">\M</span>ySQL Server 8.0<span class="se">\D</span>ata<span class="se">\m</span>ydbs&gt; ls
Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----         2020/1/7     10:44              <span class="m">0</span> table_myisam.MYD
-a----         2020/1/7     10:44           <span class="m">1024</span> table_myisam.MYI
-a----         2020/1/7     10:44           <span class="m">1538</span> table_myisam_381.sdi</code></pre></td></tr></table>
</div>
</div>
<p>MySQLåœ¨åˆ›å»ºè¡¨æ—¶ï¼Œåˆ›å»ºäº† <code>.MYD</code> (&quot;MySQL Data&quot;)ï¼Œ <code>.MYI</code> (&quot;MySQL Index&quot;)ï¼Œä»¥åŠ  <code>.sdi</code> (&quot;Serialized Dictionary Information&quot;)ä¸‰ä¸ªæ–‡ä»¶ï¼Œ <code>.sdi</code> æ–‡ä»¶å†…å®¹ä¸ºJSONæ–‡æœ¬ã€‚åœ¨ MySQL8.0 ä»¥å‰ï¼Œä¸æ˜¯ <code>.sdi</code> ï¼Œè€Œæ˜¯ <code>.frm</code> (&quot;Format&quot;)æ–‡ä»¶ã€‚</p>

<p><code>.MYD</code> æ–‡ä»¶å­˜å‚¨è¡¨æ•°æ®ï¼Œ <code>.MYI</code> å­˜å‚¨ç´¢å¼•ï¼Œ <code>.sdi</code> å­˜å‚¨è¡¨çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œä»è¿™ä¸‰ä¸ªæ–‡ä»¶çœ‹ï¼Œèƒ½çŸ¥é“ MySQL å­˜å‚¨è¡¨æ—¶ï¼Œéœ€è¦è¡¨çš„å…ƒæ•°æ®ã€ç´¢å¼•æ•°æ®ä»¥åŠè¡Œæ•°æ®ã€‚é‚£ä¹ˆåœ¨ InnoDB å­˜å‚¨å¼•æ“å†…æœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿ</p>

<h3 id="innodb-æ€æ ·å­˜å‚¨æ•°æ®">InnoDB æ€æ ·å­˜å‚¨æ•°æ®?</h3>

<p><img src="/images/how-mysql-store-data.png" alt="how-mysql-store-data" />
<p style="text-indent:2em">æ•°æ®è¡Œè¢«é€»è¾‘åœ°å­˜å‚¨åœ¨è¡¨ç©ºé—´ï¼Œè¡¨ç©ºé—´è¢«åˆ†å‰²ä¸º Segmentï¼ˆæ®µï¼‰ï¼Œå†ç»†åˆ†ä¸º Extentï¼ˆåŒºï¼‰ã€Pageï¼ˆé¡µï¼‰ï¼Œæœ€ç»ˆæ•°æ®æŒ‰è¡Œå­˜å‚¨åœ¨ Pageï¼ˆé¡µï¼‰å†…ã€‚
é»˜è®¤æƒ…å†µä¸‹ Page çš„å¤§å°ä¸º16KBï¼Œå¯ä¿®æ”¹ <code>innodb_page_size</code> é€‰é¡¹æ”¹å˜é¡µé¢å¤§å°ï¼Œé¡µé¢å¤§å°æ”¹å˜ï¼ŒExtent åŠ Segment çš„å¤§å°ä¼šç›¸åº”æ”¹å˜ã€‚</p></p>

<p>åˆ›å»ºæ•°æ®åº“è¡¨ <code>table_innodb</code> ï¼ŒæœªæŒ‡å®š <code>engine</code> å°†é»˜è®¤é€‰ç”¨ <code>InnoDB</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mysql&gt; CREATE TABLE table_innodb <span class="o">(</span>column1 CHAR<span class="o">(</span>5<span class="o">)</span><span class="o">)</span> COMMENT <span class="s1">&#39;*&#39;</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
<p>å†è¿›å…¥ <code>Data</code> ç›®å½•ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">C:<span class="se">\P</span>rogramData<span class="se">\M</span>ySQL<span class="se">\M</span>ySQL Server 8.0<span class="se">\D</span>ata<span class="se">\m</span>ydbs&gt; ls
Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----          2020/1/6     19:22         <span class="m">114688</span> table_innodb.ibd</code></pre></td></tr></table>
</div>
</div>
<p>åªæ–°å¢äº† <code>.ibd</code> æ–‡ä»¶ï¼ŒInnoDB è¡¨æ²¡æœ‰åˆ›å»º <code>.sdi</code> æ–‡ä»¶ï¼Œè€Œæ˜¯å°† SDI ä¿¡æ¯å†—ä½™å­˜å‚¨åˆ°è¡¨ç©ºé—´ä¸­ï¼Œé‚£ä¹ˆ <code>.ibd</code> æ–‡ä»¶å°±åŒ…å«äº†æ•°æ®åº“è¡¨çš„å…ƒæ•°æ®ã€è¡¨å†…è¡Œæ•°æ®ä»¥åŠç´¢å¼•æ•°æ®ï¼Œå¦‚ä½•çœ‹åˆ° SDI ä¿¡æ¯å‘¢ï¼Ÿ MySQL æä¾›äº† <code>ibd2sdi</code> å·¥å…·ï¼Œå¯æå–å‡ºè¡¨å…ƒæ•°æ®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">ibd2sdi.exe <span class="s2">&#34;C:\ProgramData\MySQL\MySQL Server 8.0\Data\mydbs\table_innodb.ibd&#34;</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">[</span>
    <span class="s2">&#34;ibd2sdi&#34;</span><span class="p">,</span>
    <span class="p">{</span>
        <span class="nt">&#34;type&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        <span class="nt">&#34;id&#34;</span><span class="p">:</span><span class="mi">380</span><span class="p">,</span>
        <span class="nt">&#34;object&#34;</span><span class="p">:</span><span class="p">{</span>
            <span class="nt">&#34;mysqld_version_id&#34;</span><span class="p">:</span><span class="mi">80018</span><span class="p">,</span>
            <span class="nt">&#34;dd_version&#34;</span><span class="p">:</span><span class="mi">80017</span><span class="p">,</span>
            <span class="nt">&#34;sdi_version&#34;</span><span class="p">:</span><span class="mi">80016</span><span class="p">,</span>
            <span class="nt">&#34;dd_object_type&#34;</span><span class="p">:</span><span class="s2">&#34;Table&#34;</span><span class="p">,</span>
            <span class="nt">&#34;dd_object&#34;</span><span class="p">:</span><span class="p">{</span>
                <span class="nt">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;table_innodb&#34;</span><span class="p">,</span>
                <span class="nt">&#34;mysql_version_id&#34;</span><span class="p">:</span><span class="mi">80018</span><span class="p">,</span>
                <span class="nt">&#34;created&#34;</span><span class="p">:</span><span class="mi">20200106112214</span><span class="p">,</span>
                <span class="nt">&#34;last_altered&#34;</span><span class="p">:</span><span class="mi">20200106112214</span><span class="p">,</span>
                <span class="nt">&#34;hidden&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                <span class="nt">&#34;options&#34;</span><span class="p">:</span><span class="s2">&#34;avg_row_length=0;encrypt_type=N;key_block_size=0;keys_disabled=0;pack_record=0;stats_auto_recalc=0;stats_sample_pages=0;&#34;</span><span class="p">,</span>
                <span class="nt">&#34;columns&#34;</span><span class="p">:</span><span class="p">[</span>
                    <span class="p">{</span>
                        <span class="nt">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;column1&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;type&#34;</span><span class="p">:</span><span class="mi">29</span><span class="p">,</span>
                        <span class="nt">&#34;is_nullable&#34;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&#34;is_zerofill&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&#34;is_unsigned&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&#34;is_auto_increment&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&#34;is_virtual&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&#34;hidden&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                        <span class="nt">&#34;ordinal_position&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                        <span class="nt">&#34;char_length&#34;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span>
                        <span class="nt">&#34;numeric_precision&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                        <span class="nt">&#34;numeric_scale&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                        <span class="nt">&#34;numeric_scale_null&#34;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&#34;datetime_precision&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                        <span class="nt">&#34;datetime_precision_null&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                        <span class="nt">&#34;has_no_default&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&#34;default_value_null&#34;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&#34;srs_id_null&#34;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&#34;srs_id&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                        <span class="nt">&#34;default_value&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;default_value_utf8_null&#34;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&#34;default_value_utf8&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;default_option&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;update_option&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;comment&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;generation_expression&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;generation_expression_utf8&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;options&#34;</span><span class="p">:</span><span class="s2">&#34;interval_count=0;&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;se_private_data&#34;</span><span class="p">:</span><span class="s2">&#34;table_id=1091;&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;column_key&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                        <span class="nt">&#34;column_type_utf8&#34;</span><span class="p">:</span><span class="s2">&#34;char(5)&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;elements&#34;</span><span class="p">:</span><span class="p">[</span>

                        <span class="p">]</span><span class="p">,</span>
                        <span class="nt">&#34;collation_id&#34;</span><span class="p">:</span><span class="mi">255</span><span class="p">,</span>
                        <span class="nt">&#34;is_explicit_collation&#34;</span><span class="p">:</span><span class="kc">false</span>
                    <span class="p">}</span>
                <span class="p">]</span><span class="p">,</span>
                <span class="nt">&#34;schema_ref&#34;</span><span class="p">:</span><span class="s2">&#34;mydbs&#34;</span><span class="p">,</span>
                <span class="nt">&#34;se_private_id&#34;</span><span class="p">:</span><span class="mi">1091</span><span class="p">,</span>
                <span class="nt">&#34;engine&#34;</span><span class="p">:</span><span class="s2">&#34;InnoDB&#34;</span><span class="p">,</span>
                <span class="nt">&#34;last_checked_for_upgrade_version_id&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                <span class="nt">&#34;comment&#34;</span><span class="p">:</span><span class="s2">&#34;*&#34;</span><span class="p">,</span>
                <span class="nt">&#34;se_private_data&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                <span class="nt">&#34;row_format&#34;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                <span class="nt">&#34;partition_type&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                <span class="nt">&#34;partition_expression&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                <span class="nt">&#34;partition_expression_utf8&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                <span class="nt">&#34;default_partitioning&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                <span class="nt">&#34;subpartition_type&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                <span class="nt">&#34;subpartition_expression&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                <span class="nt">&#34;subpartition_expression_utf8&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                <span class="nt">&#34;default_subpartitioning&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                <span class="nt">&#34;indexes&#34;</span><span class="p">:</span><span class="p">[</span>
                    <span class="p">{</span>
                        <span class="nt">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;PRIMARY&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;hidden&#34;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&#34;is_generated&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&#34;ordinal_position&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                        <span class="nt">&#34;comment&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;options&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;se_private_data&#34;</span><span class="p">:</span><span class="s2">&#34;id=204;root=4;space_id=34;table_id=1091;trx_id=2436;&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;type&#34;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                        <span class="nt">&#34;algorithm&#34;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                        <span class="nt">&#34;is_algorithm_explicit&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&#34;is_visible&#34;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&#34;engine&#34;</span><span class="p">:</span><span class="s2">&#34;InnoDB&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;elements&#34;</span><span class="p">:</span><span class="p">[</span>
                            <span class="p">{</span>
                                <span class="nt">&#34;ordinal_position&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                                <span class="nt">&#34;length&#34;</span><span class="p">:</span><span class="mi">4294967295</span><span class="p">,</span>
                                <span class="nt">&#34;order&#34;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                                <span class="nt">&#34;hidden&#34;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                                <span class="nt">&#34;column_opx&#34;</span><span class="p">:</span><span class="mi">1</span>
                            <span class="p">}</span>
                        <span class="p">]</span><span class="p">,</span>
                        <span class="nt">&#34;tablespace_ref&#34;</span><span class="p">:</span><span class="s2">&#34;mydbs/table_innodb&#34;</span>
                    <span class="p">}</span>
                <span class="p">]</span><span class="p">,</span>
                <span class="nt">&#34;foreign_keys&#34;</span><span class="p">:</span><span class="p">[</span>

                <span class="p">]</span><span class="p">,</span>
                <span class="nt">&#34;check_constraints&#34;</span><span class="p">:</span><span class="p">[</span>

                <span class="p">]</span><span class="p">,</span>
                <span class="nt">&#34;partitions&#34;</span><span class="p">:</span><span class="p">[</span>

                <span class="p">]</span><span class="p">,</span>
                <span class="nt">&#34;collation_id&#34;</span><span class="p">:</span><span class="mi">255</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="p">,</span>
    <span class="p">{</span>
        <span class="nt">&#34;type&#34;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
        <span class="nt">&#34;id&#34;</span><span class="p">:</span><span class="mi">39</span><span class="p">,</span>
        <span class="nt">&#34;object&#34;</span><span class="p">:</span><span class="p">{</span>
            <span class="nt">&#34;mysqld_version_id&#34;</span><span class="p">:</span><span class="mi">80018</span><span class="p">,</span>
            <span class="nt">&#34;dd_version&#34;</span><span class="p">:</span><span class="mi">80017</span><span class="p">,</span>
            <span class="nt">&#34;sdi_version&#34;</span><span class="p">:</span><span class="mi">80016</span><span class="p">,</span>
            <span class="nt">&#34;dd_object_type&#34;</span><span class="p">:</span><span class="s2">&#34;Tablespace&#34;</span><span class="p">,</span>
            <span class="nt">&#34;dd_object&#34;</span><span class="p">:</span><span class="p">{</span>
                <span class="nt">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;mydbs/table_innodb&#34;</span><span class="p">,</span>
                <span class="nt">&#34;comment&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
                <span class="nt">&#34;options&#34;</span><span class="p">:</span><span class="s2">&#34;encryption=N;&#34;</span><span class="p">,</span>
                <span class="nt">&#34;se_private_data&#34;</span><span class="p">:</span><span class="s2">&#34;flags=16417;id=34;server_version=80018;space_version=1;state=normal;&#34;</span><span class="p">,</span>
                <span class="nt">&#34;engine&#34;</span><span class="p">:</span><span class="s2">&#34;InnoDB&#34;</span><span class="p">,</span>
                <span class="nt">&#34;files&#34;</span><span class="p">:</span><span class="p">[</span>
                    <span class="p">{</span>
                        <span class="nt">&#34;ordinal_position&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                        <span class="nt">&#34;filename&#34;</span><span class="p">:</span><span class="s2">&#34;.\mydbs\table_innodb.ibd&#34;</span><span class="p">,</span>
                        <span class="nt">&#34;se_private_data&#34;</span><span class="p">:</span><span class="s2">&#34;id=34;&#34;</span>
                    <span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span></code></pre></td></tr></table>
</div>
</div>
<p>æå–å‡ºçš„ä¿¡æ¯ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹éƒ¨åˆ†ï¼Œæ˜¯æ‰€æœ‰è¡¨å…¬ç”¨çš„ï¼š</p>

<ol>
<li><code>ibdata1</code> è¡¨å±æ€§ï¼ŒåŒ…æ‹¬è¡¨çš„åˆ—ä¿¡æ¯ï¼Œæ‰€å±æ•°æ®åº“ï¼Œç´¢å¼•ä¿¡æ¯ï¼Œå¤–é”®ä¿¡æ¯ç­‰ï¼›</li>
<li><code>ibdata2</code> è¡¨æ•°æ®å­˜å‚¨ä¿¡æ¯ï¼Œæ•°æ®å­˜å‚¨ä½ç½®ç­‰ï¼›</li>
</ol>

<h5 id="å°èŠ‚">å°èŠ‚</h5>

<ol>
<li>InnoDB æŒ‰è¡Œå­˜å‚¨æ•°æ®</li>
<li>å­˜å‚¨æ•°æ®çš„æ–‡ä»¶ä¸º <code>.idb</code> æ–‡ä»¶ï¼ŒåŒ…å«è¡¨ç©ºé—´æè¿°ã€è¡Œæ•°æ®å’Œç´¢å¼•ä¿¡æ¯</li>
<li>ä¸€ä¸ªæ•°æ®åº“è¡¨å¯¹åº”ä¸€ä¸ª <code>.idb</code> æ–‡ä»¶ï¼Œä¸ºæ‰€æœ‰è¡¨å…¬ç”¨</li>
<li>å¯ä½¿ç”¨ <code>ibd2sdi</code> å·¥å…·æå–å‡ºè¡¨ç©ºé—´æè¿°ä¿¡æ¯</li>
</ol>
]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/mysql/" term="mysql" label="mysql" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/innodb/" term="InnoDB" label="InnoDB" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/myisam/" term="MyISAM" label="MyISAM" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">cache2goæºç é˜…è¯»ï¼ˆäºŒï¼‰</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/cache2go_ii/" />
            <id>https://jjmeg.github.io/posts/cache2go_ii/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2020-01-02T15:54:51+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ç¼“å­˜è¡¨çš„æ’åº ä¸ºäº†å®ç°è·å–ç¼“å­˜è¡¨å†…æœ€å¤šè®¿é—®çš„å…ƒç´ ï¼Œå¼•å…¥è¿™ä¸¤ä¸ªæ•°æ®ç»“æ„ç”¨äºæ’åºï¼š 1 2 3 4â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<h3 id="ç¼“å­˜è¡¨çš„æ’åº">ç¼“å­˜è¡¨çš„æ’åº</h3>

<p>ä¸ºäº†å®ç°è·å–ç¼“å­˜è¡¨å†…æœ€å¤šè®¿é—®çš„å…ƒç´ ï¼Œå¼•å…¥è¿™ä¸¤ä¸ªæ•°æ®ç»“æ„ç”¨äºæ’åºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">CacheItemPair</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Key</span>         <span class="kd">interface</span><span class="p">{</span><span class="p">}</span>
	<span class="nx">AccessCount</span> <span class="kt">int64</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">CacheItemPairList</span> <span class="p">[</span><span class="p">]</span><span class="nx">CacheItemPair</span></code></pre></td></tr></table>
</div>
</div>
<p><code>CacheItemPairList</code>æ˜¯å­˜å‚¨<code>CacheItemPair</code>çš„åˆ‡ç‰‡ï¼Œæœ‰ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">CacheItemPairList</span><span class="p">)</span> <span class="nf">Swap</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span>      <span class="p">{</span> <span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">,</span> <span class="nx">p</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="p">=</span> <span class="nx">p</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span><span class="p">,</span> <span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">CacheItemPairList</span><span class="p">)</span> <span class="nf">Len</span><span class="p">(</span><span class="p">)</span> <span class="kt">int</span>           <span class="p">{</span> <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">CacheItemPairList</span><span class="p">)</span> <span class="nf">Less</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">AccessCount</span> <span class="p">&gt;</span> <span class="nx">p</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span><span class="p">.</span><span class="nx">AccessCount</span> <span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œè¿›å…¥<code>sort</code>åŒ…ï¼ŒåŒ…å®ç°çš„æ’åºéƒ½æ˜¯å¯¹<code>Interface</code>è¿™ä¸ªæ¥å£åšçš„ï¼Œå› æ­¤è¢«æ’åºçš„æ•°æ®ç»“æ„éœ€è¦å®ç°è¿™ä¸‰ä¸ªæ–¹æ³•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">Interface</span> <span class="kd">interface</span> <span class="p">{</span>
	<span class="c1">// Len is the number of elements in the collection.
</span><span class="c1"></span>	<span class="nf">Len</span><span class="p">(</span><span class="p">)</span> <span class="kt">int</span>
	<span class="c1">// Less reports whether the element with
</span><span class="c1"></span>	<span class="c1">// index i should sort before the element with index j.
</span><span class="c1"></span>	<span class="nf">Less</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span>
	<span class="c1">// Swap swaps the elements with indexes i and j.
</span><span class="c1"></span>	<span class="nf">Swap</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>å€ŸåŠ©<code>CacheItemPair</code>ï¼Œå­˜å‚¨<code>key</code>å’Œè®¿é—®æ¬¡æ•°<code>accessCount</code>ï¼Œé€šè¿‡<code>CacheItemPairList</code>å®ç°æ’åºï¼Œæ’åºå®Œçš„åˆ—è¡¨ï¼Œå†éå†å¾—åˆ°å…ƒç´ ï¼Œæ„é€ æ–°é¡ºåºçš„å…ƒç´ è¡¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">table</span> <span class="o">*</span><span class="nx">CacheTable</span><span class="p">)</span> <span class="nf">MostAccessed</span><span class="p">(</span><span class="nx">count</span> <span class="kt">int64</span><span class="p">)</span> <span class="p">[</span><span class="p">]</span><span class="o">*</span><span class="nx">CacheItem</span> <span class="p">{</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">RLock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">table</span><span class="p">.</span><span class="nf">RUnlock</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">p</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="nx">CacheItemPairList</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">table</span><span class="p">.</span><span class="nx">items</span><span class="p">)</span><span class="p">)</span>
	<span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span>
	<span class="k">for</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">table</span><span class="p">.</span><span class="nx">items</span> <span class="p">{</span>
		<span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">CacheItemPair</span><span class="p">{</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">.</span><span class="nx">accessCount</span><span class="p">}</span>
		<span class="nx">i</span><span class="o">++</span>
	<span class="p">}</span>
	<span class="nx">sort</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">r</span> <span class="p">[</span><span class="p">]</span><span class="o">*</span><span class="nx">CacheItem</span>
	<span class="nx">c</span> <span class="o">:=</span> <span class="nb">int64</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
	<span class="c1">// pç»è¿‡æ’åºåï¼Œé€šè¿‡éå†æ„é€ æ–°çš„items list
</span><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">p</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">c</span> <span class="o">&gt;=</span> <span class="nx">count</span> <span class="p">{</span>
			<span class="k">break</span>
		<span class="p">}</span>

		<span class="nx">item</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">table</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="nx">v</span><span class="p">.</span><span class="nx">Key</span><span class="p">]</span>
		<span class="k">if</span> <span class="nx">ok</span> <span class="p">{</span>
			<span class="nx">r</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">item</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="nx">c</span><span class="o">++</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="nx">r</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/" term="æºç é˜…è¯»" label="æºç é˜…è¯»" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/cache2go/" term="cache2go" label="cache2go" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">cache2goæºç é˜…è¯»ï¼ˆä¸€ï¼‰</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/cache2go_i/" />
            <id>https://jjmeg.github.io/posts/cache2go_i/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2020-01-02T15:17:51+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ã€Œ cache2go ã€ å¹¶å‘å®‰å…¨çš„golangç¼“å­˜åº“ï¼Œæ”¯æŒè¿‡æœŸåŠŸèƒ½ã€‚ ä»Exampleå¼€å§‹ 1 2 3 4 5 6 7â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<p><center>ã€Œ <a href="https://github.com/muesli/cache2go" target="_blank">cache2go</a> ã€</center>
<center>å¹¶å‘å®‰å…¨çš„golangç¼“å­˜åº“ï¼Œæ”¯æŒè¿‡æœŸåŠŸèƒ½ã€‚</center></p>

<h3 id="ä»exampleå¼€å§‹">ä»Exampleå¼€å§‹</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="c1">// å¾…å­˜å‚¨çš„å…ƒç´ çš„ç»“æ„ä½“å®šä¹‰
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">myStruct</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">text</span>     <span class="kt">string</span>
	<span class="nx">moreData</span> <span class="p">[</span><span class="p">]</span><span class="kt">byte</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// åˆ›å»ºä¸€ä¸ªç¼“å­˜è¡¨
</span><span class="c1"></span>	<span class="nx">cache</span> <span class="o">:=</span> <span class="nx">cache2go</span><span class="p">.</span><span class="nf">Cache</span><span class="p">(</span><span class="s">&#34;myCache&#34;</span><span class="p">)</span>

  <span class="c1">// å‡†å¤‡å…ƒç´ 
</span><span class="c1"></span>	<span class="nx">val</span> <span class="o">:=</span> <span class="nx">myStruct</span><span class="p">{</span><span class="s">&#34;This is a test!&#34;</span><span class="p">,</span> <span class="p">[</span><span class="p">]</span><span class="kt">byte</span><span class="p">{</span><span class="p">}</span><span class="p">}</span>

  <span class="c1">// ç¼“å­˜è¡¨æ·»åŠ å…ƒç´ ï¼Œè®¾å®šè¿‡æœŸæ—¶é—´
</span><span class="c1"></span>	<span class="nx">cache</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">&#34;someKey&#34;</span><span class="p">,</span> <span class="mi">5</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">val</span><span class="p">)</span>

	<span class="c1">// ä»ç¼“å­˜ä¸­è·å–å…ƒç´ 
</span><span class="c1"></span>	<span class="nx">res</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">cache</span><span class="p">.</span><span class="nf">Value</span><span class="p">(</span><span class="s">&#34;someKey&#34;</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Found value in cache:&#34;</span><span class="p">,</span> <span class="nx">res</span><span class="p">.</span><span class="nf">Data</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="p">(</span><span class="o">*</span><span class="nx">myStruct</span><span class="p">)</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Error retrieving value from cache:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="c1">// ç­‰å¾…ç›´è‡³å…ƒç´ è¿‡æœŸ
</span><span class="c1"></span>	<span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">6</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
	<span class="nx">res</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">cache</span><span class="p">.</span><span class="nf">Value</span><span class="p">(</span><span class="s">&#34;someKey&#34;</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Item is not cached (anymore).&#34;</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="c1">// æ·»åŠ æ–°çš„æ°¸ä¸è¿‡æœŸçš„å…ƒç´ 
</span><span class="c1"></span>	<span class="nx">cache</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">&#34;someKey&#34;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">val</span><span class="p">)</span>

	<span class="c1">// è®¾ç½®åˆ é™¤å…ƒç´ æ—¶ç»™åé¦ˆ
</span><span class="c1"></span>	<span class="nx">cache</span><span class="p">.</span><span class="nf">SetAboutToDeleteItemCallback</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">e</span> <span class="o">*</span><span class="nx">cache2go</span><span class="p">.</span><span class="nx">CacheItem</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Deleting:&#34;</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nf">Key</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nf">Data</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="p">(</span><span class="o">*</span><span class="nx">myStruct</span><span class="p">)</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nf">CreatedOn</span><span class="p">(</span><span class="p">)</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span>

	<span class="c1">// ç§»é™¤å…ƒç´ 
</span><span class="c1"></span>	<span class="nx">cache</span><span class="p">.</span><span class="nf">Delete</span><span class="p">(</span><span class="s">&#34;someKey&#34;</span><span class="p">)</span>

	<span class="c1">// æ¸…ç©ºç¼“å­˜
</span><span class="c1"></span>	<span class="nx">cache</span><span class="p">.</span><span class="nf">Flush</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>è¿™ä¸ªexampleå®Œæˆäº†ä»¥ä¸‹äº‹æƒ…ï¼š</p>

<ul>
<li>æ–°å»ºç¼“å­˜è¡¨</li>
<li>å¾€è¡¨å†…æ·»åŠ ã€åˆ é™¤å…ƒç´ </li>
<li>å…ƒç´ è¿‡æœŸå¤„ç†</li>
</ul>

<p>ä»è¿™ä¸ªä¾‹å­æ¥çœ‹ï¼Œèƒ½å‘ç°ä¸¤ä¸ªé‡è¦çš„æ•°æ®ç»“æ„ï¼Œç¼“å­˜è¡¨<code>CacheTable</code>ï¼Œå’Œå…ƒç´ <code>CacheItem</code>ã€‚</p>

<h3 id="ä¸»è¦æ•°æ®ç»“æ„-cachetableå’Œcacheitem">ä¸»è¦æ•°æ®ç»“æ„ï¼šCacheTableå’ŒCacheItem</h3>

<h6 id="1-å…ƒç´ cacheitem">1. å…ƒç´ CacheItem</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">CacheItem</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">sync</span><span class="p">.</span><span class="nx">RWMutex</span>

	<span class="c1">// å…ƒç´ çš„key
</span><span class="c1"></span>	<span class="nx">key</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span>
	<span class="c1">// å…ƒç´ å†…å®¹
</span><span class="c1"></span>	<span class="nx">data</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span>
	<span class="c1">// å…ƒç´ ç”Ÿå‘½å‘¨æœŸ
</span><span class="c1"></span>	<span class="nx">lifeSpan</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span>

	<span class="c1">// åˆ›å»ºæ—¶é—´
</span><span class="c1"></span>	<span class="nx">createdOn</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
	<span class="c1">// æœ€åè¢«è®¿é—®æ—¶é—´
</span><span class="c1"></span>	<span class="nx">accessedOn</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
	<span class="c1">// è®¿é—®æ¬¡æ•°
</span><span class="c1"></span>	<span class="nx">accessCount</span> <span class="kt">int64</span>

	<span class="c1">// åˆ°æœŸç­¾å¯è§¦å‘çš„æ–¹æ³•
</span><span class="c1"></span>	<span class="nx">aboutToExpire</span> <span class="p">[</span><span class="p">]</span><span class="kd">func</span><span class="p">(</span><span class="nx">key</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>æ„é€ å‡½æ•°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">NewCacheItem</span><span class="p">(</span><span class="nx">key</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">,</span> <span class="nx">lifeSpan</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span><span class="p">,</span> <span class="nx">data</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="o">*</span><span class="nx">CacheItem</span> <span class="p">{</span>
	<span class="nx">t</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">(</span><span class="p">)</span>
	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">CacheItem</span><span class="p">{</span>
		<span class="nx">key</span><span class="p">:</span>           <span class="nx">key</span><span class="p">,</span>
		<span class="nx">lifeSpan</span><span class="p">:</span>      <span class="nx">lifeSpan</span><span class="p">,</span>
		<span class="nx">createdOn</span><span class="p">:</span>     <span class="nx">t</span><span class="p">,</span>
		<span class="nx">accessedOn</span><span class="p">:</span>    <span class="nx">t</span><span class="p">,</span>
		<span class="nx">accessCount</span><span class="p">:</span>   <span class="mi">0</span><span class="p">,</span>
		<span class="nx">aboutToExpire</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span>
		<span class="nx">data</span><span class="p">:</span>          <span class="nx">data</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>cache2goæ˜¯å¹¶å‘å®‰å…¨çš„ï¼ŒCacheItemå†…æœ‰ä¸ªè¯»å†™é”ï¼Œåœ¨å¯¹å¯èƒ½è¢«å…¶ä»–çº¿ç¨‹æ”¹å†™çš„å±æ€§è¿›è¡Œè®¿é—®æ—¶ï¼Œéƒ½ä¼šåšä¸Šé”æ“ä½œï¼Œé€šè¿‡è¿™ä¸ªé”å®ç°cache2goçš„å¹¶å‘å®‰å…¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">item</span> <span class="o">*</span><span class="nx">CacheItem</span><span class="p">)</span> <span class="nf">KeepAlive</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">item</span><span class="p">.</span><span class="nf">Lock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">item</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">item</span><span class="p">.</span><span class="nx">accessedOn</span> <span class="p">=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">item</span><span class="p">.</span><span class="nx">accessCount</span><span class="o">++</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">item</span> <span class="o">*</span><span class="nx">CacheItem</span><span class="p">)</span> <span class="nf">AccessedOn</span><span class="p">(</span><span class="p">)</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span> <span class="p">{</span>
	<span class="nx">item</span><span class="p">.</span><span class="nf">RLock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">item</span><span class="p">.</span><span class="nf">RUnlock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">return</span> <span class="nx">item</span><span class="p">.</span><span class="nx">accessedOn</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">item</span> <span class="o">*</span><span class="nx">CacheItem</span><span class="p">)</span> <span class="nf">AccessCount</span><span class="p">(</span><span class="p">)</span> <span class="kt">int64</span> <span class="p">{</span>
	<span class="nx">item</span><span class="p">.</span><span class="nf">RLock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">item</span><span class="p">.</span><span class="nf">RUnlock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">return</span> <span class="nx">item</span><span class="p">.</span><span class="nx">accessCount</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">item</span> <span class="o">*</span><span class="nx">CacheItem</span><span class="p">)</span> <span class="nf">SetAboutToExpireCallback</span><span class="p">(</span><span class="nx">f</span> <span class="kd">func</span><span class="p">(</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">aboutToExpire</span><span class="p">)</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
		<span class="nx">item</span><span class="p">.</span><span class="nf">RemoveAboutToExpireCallback</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">item</span><span class="p">.</span><span class="nf">Lock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">item</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">item</span><span class="p">.</span><span class="nx">aboutToExpire</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">aboutToExpire</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">item</span> <span class="o">*</span><span class="nx">CacheItem</span><span class="p">)</span> <span class="nf">AddAboutToExpireCallback</span><span class="p">(</span><span class="nx">f</span> <span class="kd">func</span><span class="p">(</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">item</span><span class="p">.</span><span class="nf">Lock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">item</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">item</span><span class="p">.</span><span class="nx">aboutToExpire</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">aboutToExpire</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">item</span> <span class="o">*</span><span class="nx">CacheItem</span><span class="p">)</span> <span class="nf">RemoveAboutToExpireCallback</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">item</span><span class="p">.</span><span class="nf">Lock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">item</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">item</span><span class="p">.</span><span class="nx">aboutToExpire</span> <span class="p">=</span> <span class="kc">nil</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="2-ç¼“å­˜è¡¨cachetable">2. ç¼“å­˜è¡¨CacheTable</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">CacheTable</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">sync</span><span class="p">.</span><span class="nx">RWMutex</span>

	<span class="c1">// ç¼“å­˜è¡¨å‘½å
</span><span class="c1"></span>	<span class="nx">name</span> <span class="kt">string</span>
	<span class="c1">// ç¼“å­˜è¡¨å†…å­˜å‚¨çš„æ‰€æœ‰å…ƒç´ ï¼Œæ˜¯ä¸ªslice
</span><span class="c1"></span>	<span class="nx">items</span> <span class="kd">map</span><span class="p">[</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">]</span><span class="o">*</span><span class="nx">CacheItem</span>

	<span class="c1">// è§¦å‘æ¸…æ¥šçš„å®šæ—¶å™¨
</span><span class="c1"></span>	<span class="nx">cleanupTimer</span> <span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Timer</span>
	<span class="c1">// å½“å‰å®šæ—¶å™¨é—´éš”
</span><span class="c1"></span>	<span class="nx">cleanupInterval</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span>

	<span class="nx">logger</span> <span class="o">*</span><span class="nx">log</span><span class="p">.</span><span class="nx">Logger</span>

	<span class="c1">// Callback method triggered when trying to load a non-existing key.
</span><span class="c1"></span>	<span class="nx">loadData</span> <span class="kd">func</span><span class="p">(</span><span class="nx">key</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">,</span> <span class="nx">args</span> <span class="o">...</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="o">*</span><span class="nx">CacheItem</span>
	<span class="c1">// Callback method triggered when adding a new item to the cache.
</span><span class="c1"></span>	<span class="nx">addedItem</span> <span class="p">[</span><span class="p">]</span><span class="kd">func</span><span class="p">(</span><span class="nx">item</span> <span class="o">*</span><span class="nx">CacheItem</span><span class="p">)</span>
	<span class="c1">// Callback method triggered before deleting an item from the cache.
</span><span class="c1"></span>	<span class="nx">aboutToDeleteItem</span> <span class="p">[</span><span class="p">]</span><span class="kd">func</span><span class="p">(</span><span class="nx">item</span> <span class="o">*</span><span class="nx">CacheItem</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>åŒæ ·çš„ï¼Œæ¶‰åŠå¹¶å‘è®¿é—®çš„å±æ€§ï¼ŒCacheTableçš„æ–¹æ³•éƒ½ä¼šåšä¸Šé”æ“ä½œï¼Œæ¯”å¦‚ä»¥ä¸‹æ–¹æ³•ï¼Œæ²¡æœ‰ä¸€ä¸€è´´å‡ºæ¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="c1">// è·å–å…ƒç´ ä¸ªæ•°
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">table</span> <span class="o">*</span><span class="nx">CacheTable</span><span class="p">)</span> <span class="nf">Count</span><span class="p">(</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">RLock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">table</span><span class="p">.</span><span class="nf">RUnlock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nx">table</span><span class="p">.</span><span class="nx">items</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// éå†
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">table</span> <span class="o">*</span><span class="nx">CacheTable</span><span class="p">)</span> <span class="nf">Foreach</span><span class="p">(</span><span class="nx">trans</span> <span class="kd">func</span><span class="p">(</span><span class="nx">key</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">,</span> <span class="nx">item</span> <span class="o">*</span><span class="nx">CacheItem</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">RLock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">table</span><span class="p">.</span><span class="nf">RUnlock</span><span class="p">(</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">table</span><span class="p">.</span><span class="nx">items</span> <span class="p">{</span>
		<span class="nf">trans</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="ç¼“å­˜è¡¨æ·»åŠ å…ƒç´ ">ç¼“å­˜è¡¨æ·»åŠ å…ƒç´ </h6>

<p>æ·»åŠ æ–°å…ƒç´ </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">table</span> <span class="o">*</span><span class="nx">CacheTable</span><span class="p">)</span> <span class="nf">Add</span><span class="p">(</span><span class="nx">key</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">,</span> <span class="nx">lifeSpan</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span><span class="p">,</span> <span class="nx">data</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="o">*</span><span class="nx">CacheItem</span> <span class="p">{</span>
	<span class="nx">item</span> <span class="o">:=</span> <span class="nf">NewCacheItem</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">lifeSpan</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>

	<span class="c1">// Add item to cache.
</span><span class="c1"></span>	<span class="nx">table</span><span class="p">.</span><span class="nf">Lock</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">addInternal</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span>

	<span class="k">return</span> <span class="nx">item</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>æ·»åŠ ä¸å­˜åœ¨çš„å…ƒç´ </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">table</span> <span class="o">*</span><span class="nx">CacheTable</span><span class="p">)</span> <span class="nf">NotFoundAdd</span><span class="p">(</span><span class="nx">key</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">,</span> <span class="nx">lifeSpan</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span><span class="p">,</span> <span class="nx">data</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">Lock</span><span class="p">(</span><span class="p">)</span>

	<span class="k">if</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">table</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="p">;</span> <span class="nx">ok</span> <span class="p">{</span>
		<span class="nx">table</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">(</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">false</span>
	<span class="p">}</span>

	<span class="c1">// æŸ¥æ‰¾ä¸åˆ°å…ƒç´ ï¼Œåˆ™æ–°å»ºå…ƒç´ æ·»åŠ 
</span><span class="c1"></span>	<span class="nx">item</span> <span class="o">:=</span> <span class="nf">NewCacheItem</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">lifeSpan</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">addInternal</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span>

	<span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>æ·»åŠ å…ƒç´ å‡è°ƒç”¨<code>addInternal</code>æ–¹æ³•ï¼Œè°ƒç”¨æ­¤æ–¹æ³•çš„å‰ææ˜¯å¿…é¡»ä¸Šé”ï¼Œç„¶åæ·»åŠ å…ƒç´ ï¼Œå¹¶åšè¿‡æœŸæ£€æŸ¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">table</span> <span class="o">*</span><span class="nx">CacheTable</span><span class="p">)</span> <span class="nf">addInternal</span><span class="p">(</span><span class="nx">item</span> <span class="o">*</span><span class="nx">CacheItem</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// Careful: do not run this method unless the table-mutex is locked!
</span><span class="c1"></span>	<span class="c1">// It will unlock it for the caller before running the callbacks and checks
</span><span class="c1"></span>	<span class="nx">table</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;Adding item with key&#34;</span><span class="p">,</span> <span class="nx">item</span><span class="p">.</span><span class="nx">key</span><span class="p">,</span> <span class="s">&#34;and lifespan of&#34;</span><span class="p">,</span> <span class="nx">item</span><span class="p">.</span><span class="nx">lifeSpan</span><span class="p">,</span> <span class="s">&#34;to table&#34;</span><span class="p">,</span> <span class="nx">table</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
	<span class="nx">table</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="nx">item</span><span class="p">.</span><span class="nx">key</span><span class="p">]</span> <span class="p">=</span> <span class="nx">item</span>

	<span class="c1">// Cache values so we don&#39;t keep blocking the mutex.
</span><span class="c1"></span>	<span class="nx">expDur</span> <span class="o">:=</span> <span class="nx">table</span><span class="p">.</span><span class="nx">cleanupInterval</span>
	<span class="nx">addedItem</span> <span class="o">:=</span> <span class="nx">table</span><span class="p">.</span><span class="nx">addedItem</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">(</span><span class="p">)</span>

	<span class="c1">// Trigger callback after adding an item to cache.
</span><span class="c1"></span>	<span class="k">if</span> <span class="nx">addedItem</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">callback</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">addedItem</span> <span class="p">{</span>
			<span class="nf">callback</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="c1">// If we haven&#39;t set up any expiration check timer or found a more imminent item.
</span><span class="c1"></span>	<span class="k">if</span> <span class="nx">item</span><span class="p">.</span><span class="nx">lifeSpan</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">expDur</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">item</span><span class="p">.</span><span class="nx">lifeSpan</span> <span class="p">&lt;</span> <span class="nx">expDur</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">table</span><span class="p">.</span><span class="nf">expirationCheck</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="ç¼“å­˜è¡¨åˆ é™¤å…ƒç´ ">ç¼“å­˜è¡¨åˆ é™¤å…ƒç´ </h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">table</span> <span class="o">*</span><span class="nx">CacheTable</span><span class="p">)</span> <span class="nf">Delete</span><span class="p">(</span><span class="nx">key</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">CacheItem</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">Lock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">table</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">(</span><span class="p">)</span>

	<span class="k">return</span> <span class="nx">table</span><span class="p">.</span><span class="nf">deleteInternal</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>ç±»ä¼¼äºæ·»åŠ å…ƒç´ æ–¹æ³•ï¼ŒåŠ é”åè°ƒç”¨<code>deleteInternal</code>æ–¹æ³•ï¼Œå…ˆæ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œåœ¨åˆ é™¤å…ƒç´ å‰ï¼Œå…ˆç¡®å®šæœ‰æ²¡æœ‰<code>aboutToDeleteItem</code>å›è°ƒå‡½æ•°è¦è°ƒç”¨ï¼Œå†å¯¹CacheItemä¸Šé”åˆ é™¤</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">table</span> <span class="o">*</span><span class="nx">CacheTable</span><span class="p">)</span> <span class="nf">deleteInternal</span><span class="p">(</span><span class="nx">key</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">CacheItem</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">r</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">table</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span>
	<span class="k">if</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">ErrKeyNotFound</span>
	<span class="p">}</span>

	<span class="c1">// Cache value so we don&#39;t keep blocking the mutex.
</span><span class="c1"></span>	<span class="nx">aboutToDeleteItem</span> <span class="o">:=</span> <span class="nx">table</span><span class="p">.</span><span class="nx">aboutToDeleteItem</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">(</span><span class="p">)</span>

	<span class="c1">// Trigger callbacks before deleting an item from cache.
</span><span class="c1"></span>	<span class="k">if</span> <span class="nx">aboutToDeleteItem</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">callback</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">aboutToDeleteItem</span> <span class="p">{</span>
			<span class="nf">callback</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="nx">r</span><span class="p">.</span><span class="nf">RLock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">r</span><span class="p">.</span><span class="nf">RUnlock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">r</span><span class="p">.</span><span class="nx">aboutToExpire</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">callback</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">r</span><span class="p">.</span><span class="nx">aboutToExpire</span> <span class="p">{</span>
			<span class="nf">callback</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="nx">table</span><span class="p">.</span><span class="nf">Lock</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;Deleting item with key&#34;</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="s">&#34;created on&#34;</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nx">createdOn</span><span class="p">,</span> <span class="s">&#34;and hit&#34;</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nx">accessCount</span><span class="p">,</span> <span class="s">&#34;times from table&#34;</span><span class="p">,</span> <span class="nx">table</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
	<span class="nb">delete</span><span class="p">(</span><span class="nx">table</span><span class="p">.</span><span class="nx">items</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span>

	<span class="k">return</span> <span class="nx">r</span><span class="p">,</span> <span class="kc">nil</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="å…ƒç´ è¿‡æœŸæ£€æŸ¥æœºåˆ¶">å…ƒç´ è¿‡æœŸæ£€æŸ¥æœºåˆ¶</h6>

<ul>
<li><code>lifeSpan</code>ä¸º0çš„å…ƒç´ æ°¸ä¹…ä¿ç•™</li>

<li><p>é€šè¿‡å…ƒç´ çš„<code>accessedOn</code>å±æ€§åˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼Œå·²è¿‡æœŸåˆ™åˆ é™¤ï¼Œæœªè¿‡æœŸæ›´æ–°å‰©ä½™ç”Ÿå‘½æ—¶é•¿</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">table</span> <span class="o">*</span><span class="nx">CacheTable</span><span class="p">)</span> <span class="nf">expirationCheck</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">Lock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">table</span><span class="p">.</span><span class="nx">cleanupTimer</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">table</span><span class="p">.</span><span class="nx">cleanupTimer</span><span class="p">.</span><span class="nf">Stop</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="nx">table</span><span class="p">.</span><span class="nx">cleanupInterval</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
		<span class="nx">table</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;Expiration check triggered after&#34;</span><span class="p">,</span> <span class="nx">table</span><span class="p">.</span><span class="nx">cleanupInterval</span><span class="p">,</span> <span class="s">&#34;for table&#34;</span><span class="p">,</span> <span class="nx">table</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nx">table</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;Expiration check installed for table&#34;</span><span class="p">,</span> <span class="nx">table</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="c1">// To be more accurate with timers, we would need to update &#39;now&#39; on every
</span><span class="c1"></span>	<span class="c1">// loop iteration. Not sure it&#39;s really efficient though.
</span><span class="c1"></span>	<span class="nx">now</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">smallestDuration</span> <span class="o">:=</span> <span class="mi">0</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Second</span>
	<span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">item</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">table</span><span class="p">.</span><span class="nx">items</span> <span class="p">{</span>
		<span class="c1">// Cache values so we don&#39;t keep blocking the mutex.
</span><span class="c1"></span>		<span class="nx">item</span><span class="p">.</span><span class="nf">RLock</span><span class="p">(</span><span class="p">)</span>
		<span class="nx">lifeSpan</span> <span class="o">:=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">lifeSpan</span>
		<span class="nx">accessedOn</span> <span class="o">:=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">accessedOn</span>
		<span class="nx">item</span><span class="p">.</span><span class="nf">RUnlock</span><span class="p">(</span><span class="p">)</span>

		<span class="c1">// ä¸º0çš„å…ƒç´ æ°¸ä¹…ä¿ç•™
</span><span class="c1"></span>		<span class="k">if</span> <span class="nx">lifeSpan</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
			<span class="k">continue</span>
		<span class="p">}</span>

		<span class="c1">// é€šè¿‡å…ƒç´ çš„`accessedOn`å±æ€§åˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼Œå·²è¿‡æœŸåˆ™åˆ é™¤
</span><span class="c1"></span>		<span class="k">if</span> <span class="nx">now</span><span class="p">.</span><span class="nf">Sub</span><span class="p">(</span><span class="nx">accessedOn</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">lifeSpan</span> <span class="p">{</span>
			<span class="c1">// Item has excessed its lifespan.
</span><span class="c1"></span>			<span class="nx">table</span><span class="p">.</span><span class="nf">deleteInternal</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="c1">// æœªè¿‡æœŸæ›´æ–°å‰©ä½™ç”Ÿå‘½æ—¶é•¿
</span><span class="c1"></span>			<span class="c1">// Find the item chronologically closest to its end-of-lifespan.
</span><span class="c1"></span>			<span class="k">if</span> <span class="nx">smallestDuration</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">lifeSpan</span><span class="o">-</span><span class="nx">now</span><span class="p">.</span><span class="nf">Sub</span><span class="p">(</span><span class="nx">accessedOn</span><span class="p">)</span> <span class="p">&lt;</span> <span class="nx">smallestDuration</span> <span class="p">{</span>
				<span class="nx">smallestDuration</span> <span class="p">=</span> <span class="nx">lifeSpan</span> <span class="o">-</span> <span class="nx">now</span><span class="p">.</span><span class="nf">Sub</span><span class="p">(</span><span class="nx">accessedOn</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="c1">// Setup the interval for the next cleanup run.
</span><span class="c1"></span>	<span class="nx">table</span><span class="p">.</span><span class="nx">cleanupInterval</span> <span class="p">=</span> <span class="nx">smallestDuration</span>
	<span class="k">if</span> <span class="nx">smallestDuration</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
		<span class="nx">table</span><span class="p">.</span><span class="nx">cleanupTimer</span> <span class="p">=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">AfterFunc</span><span class="p">(</span><span class="nx">smallestDuration</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">go</span> <span class="nx">table</span><span class="p">.</span><span class="nf">expirationCheck</span><span class="p">(</span><span class="p">)</span>
		<span class="p">}</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<h6 id="ç¼“å­˜è¡¨æ¸…ç©º">ç¼“å­˜è¡¨æ¸…ç©º</h6>

<p>å…³é—­å®šæ—¶å™¨ï¼Œå­˜æ”¾å…ƒç´ çš„mapæŒ‡å‘ä¸€ä¸ªç©ºmapå³å¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">table</span> <span class="o">*</span><span class="nx">CacheTable</span><span class="p">)</span> <span class="nf">Flush</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">table</span><span class="p">.</span><span class="nf">Lock</span><span class="p">(</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">table</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">table</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">&#34;Flushing table&#34;</span><span class="p">,</span> <span class="nx">table</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>

	<span class="nx">table</span><span class="p">.</span><span class="nx">items</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">]</span><span class="o">*</span><span class="nx">CacheItem</span><span class="p">)</span>
	<span class="nx">table</span><span class="p">.</span><span class="nx">cleanupInterval</span> <span class="p">=</span> <span class="mi">0</span>
	<span class="k">if</span> <span class="nx">table</span><span class="p">.</span><span class="nx">cleanupTimer</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">table</span><span class="p">.</span><span class="nx">cleanupTimer</span><span class="p">.</span><span class="nf">Stop</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/" term="æºç é˜…è¯»" label="æºç é˜…è¯»" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/cache2go/" term="cache2go" label="cache2go" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">å†™åœ¨2019å¹´æœ€å</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/2019-summary/" />
            <id>https://jjmeg.github.io/posts/2019-summary/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2019-12-30T16:23:29+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ğŸ•š 2019å¹´3æœˆï¼Œç­¾ä¸‰æ–¹ï¼› 2019å¹´6æœˆï¼Œæ¯•ä¸šï¼› 2019å¹´7æœˆï¼Œæ­£å¼åˆ°å²—ï¼› 2019å¹´â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<p><center>ğŸ•š</center></p>

<p style="text-indent:2em">2019å¹´3æœˆï¼Œç­¾ä¸‰æ–¹ï¼›</p>

<p style="text-indent:2em">2019å¹´6æœˆï¼Œæ¯•ä¸šï¼›</p>

<p style="text-indent:2em">2019å¹´7æœˆï¼Œæ­£å¼åˆ°å²—ï¼›</p>

<p style="text-indent:2em">2019å¹´è¦ç»“æŸäº†ã€‚</p>

<h3 id="è¿™åŠå¹´åšäº†ä»€ä¹ˆ">è¿™åŠå¹´åšäº†ä»€ä¹ˆï¼Ÿ</h3>

<p style="text-indent:2em">è¿›å…¥æ–°è¡Œä¸šï¼Œäº†è§£æ–°é¢†åŸŸï¼›</p>

<p style="text-indent:2em">CRUDï¼›</p>

<p style="text-indent:2em">è‡ªæˆ‘è§„èŒƒï¼›</p>

<p style="text-indent:2em">å¿ƒæ€å»ºè®¾ï¼›</p>

<p style="text-indent:2em">ç»è¥çˆ±å¥½ï¼›</p>

<p style="text-indent:2em">å¥èº«ã€‚</p>

<h3 id="å¯¹åˆ›æ–°å‹äº§å“çš„çœ‹æ³•">å¯¹åˆ›æ–°å‹äº§å“çš„çœ‹æ³•</h3>

<p style="text-indent:2em">å¤§é¥¼ï¼›</p>

<p style="text-indent:2em">æ–°äººé›·åŒºï¼›</p>

<p style="text-indent:2em">çœ‹æ¸…è¯¥äº§å“çš„æˆ˜ç•¥åœ°ä½ï¼›</p>

<p style="text-indent:2em">æ˜¯å¦æœ‰é«˜å±‚å¤§åŠ›æ”¯æŒï¼›</p>

<p style="text-indent:2em">ä¸è¦æƒ³ç€èƒ½å¿«é€Ÿå˜ç°ï¼›</p>

<p style="text-indent:2em">ç¨³å®šçš„äº§å“å’Œä¸šåŠ¡æ‰æ˜¯ç‹é“ã€‚</p>

<h3 id="2020å¹´">2020å¹´</h3>

<p style="text-indent:2em">Enjoy it!</p>
]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/%E7%A2%8E%E5%BF%B5/" term="ç¢å¿µ" label="ç¢å¿µ" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Golangç³»åˆ—æ•™ç¨‹--é€šé“Channel</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/golang-channel/" />
            <id>https://jjmeg.github.io/posts/golang-channel/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2019-12-18T11:31:10+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ã€Œchannelã€ channel é€šé“ï¼Œgoroutineæ˜¯å®ç°å¹¶å‘çš„æ‰‹æ®µï¼Œå¸¸ç”¨äºgoroutinâ€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<p><center>ã€Œchannelã€</center>
<p style="text-indent:2em">channel é€šé“ï¼Œgoroutineæ˜¯å®ç°å¹¶å‘çš„æ‰‹æ®µï¼Œå¸¸ç”¨äºgoroutineä¹‹é—´åŒæ­¥æ¶ˆæ¯ï¼Œå‘é€å’Œæ¥æ”¶æ¶ˆæ¯ï¼Œå¯è§†ä¸ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œå®è´¨æ˜¯åœ¨goroutineä¹‹é—´å…±äº«å†…å­˜ã€‚</p></p>

<h1 id="æœ¬æ–‡å†…å®¹">ğŸ“œæœ¬æ–‡å†…å®¹</h1>

<ul>
<li>ğŸ“š<a href="#channelçš„å£°æ˜åŠåˆå§‹åŒ–">channelçš„å£°æ˜åŠåˆå§‹åŒ–</a></li>
<li>ğŸ“š<a href="#channelå­˜å–æ•°æ®åŠå…³é—­">channelå­˜å–æ•°æ®åŠå…³é—­</a></li>
<li>ğŸ“š<a href="#éç¼“å†²channel">éç¼“å†²channel</a>

<ul>
<li>ğŸ“–<a href="#channelé˜»å¡goroutine">channelé˜»å¡goroutine</a></li>
<li>ğŸ“–<a href="#æ— ç¼“å†²channelå¼•èµ·çš„æ­»é”æ¡ˆä¾‹">æ— ç¼“å†²channelå¼•èµ·çš„æ­»é”æ¡ˆä¾‹</a></li>
</ul></li>
<li>ğŸ“š<a href="#ç¼“å†²channel">ç¼“å†²channel</a></li>
</ul>

<hr />

<h3 id="channelçš„å£°æ˜åŠåˆå§‹åŒ–">ğŸµchannelçš„å£°æ˜åŠåˆå§‹åŒ–</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="c1">//å£°æ˜
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">ch</span> <span class="kd">chan</span> <span class="nx">ç±»å‹</span>
<span class="c1">//åˆå§‹åŒ–
</span><span class="c1"></span><span class="nx">ch</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="nx">ç±»å‹</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">var</span> <span class="nx">ch</span> <span class="kd">chan</span> <span class="kt">int</span>
<span class="nx">ch</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="channelå­˜å–æ•°æ®åŠå…³é—­">ğŸµchannelå­˜å–æ•°æ®åŠå…³é—­</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="nx">ch</span> <span class="o">&lt;-</span> <span class="nx">x</span> <span class="c1">//å¾€channelä¸­å­˜å…¥æ•°æ® x
</span><span class="c1"></span><span class="o">&lt;-</span> <span class="nx">ch</span> <span class="c1">// ä»channelä¸­å–å‡ºæ•°æ®
</span><span class="c1"></span><span class="nx">x</span> <span class="o">&lt;-</span> <span class="nx">ch</span> <span class="c1">//ä»channelä¸­å–å‡ºæ•°æ®å¹¶èµ‹å€¼ç»™ x
</span><span class="c1"></span><span class="nb">close</span><span class="p">(</span><span class="nx">ch</span><span class="p">)</span> <span class="o">/</span><span class="o">/</span> <span class="nx">å…³é—­é€šé“</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="éç¼“å†²channel">ğŸµéç¼“å†²channel</h3>

<p>channelä¸­åªå­˜å‚¨ä¸€ä¸ªæ•°æ®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="c1">// è¿™ä¸ªchannelä¸­åªå­˜å‚¨ä¸€ä¸ªæ•°æ®
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">ch</span> <span class="kd">chan</span> <span class="kt">int</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>
<span class="c1">// ç­‰åŒäº
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">ch</span> <span class="kd">chan</span> <span class="kt">int</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="kd">func</span> <span class="nf">foo</span><span class="p">(</span><span class="p">)</span>  <span class="p">{</span>
	<span class="nx">ch</span> <span class="o">&lt;-</span> <span class="mi">0</span><span class="c1">//å­˜æ¶ˆæ¯ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–goroutineæ¥å–èµ°è¿™ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆæŒ‚èµ·fooï¼Œç›´åˆ°mainå‡½æ•°æŠŠè¿™ä¸ª0å–èµ°
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span>  <span class="p">{</span>
	<span class="k">go</span> <span class="nf">foo</span><span class="p">(</span><span class="p">)</span>
	<span class="o">&lt;-</span> <span class="nx">ch</span><span class="c1">//ä»chå–æ¶ˆæ¯ï¼Œå¦‚æœchä¸­æ²¡æœ‰æ•°æ®ï¼Œå°±æŒ‚èµ·mainçº¿ç¨‹ï¼Œç›´åˆ°fooå‡½æ•°å¾€chå†…æ”¾æ•°æ®
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><strong>é—®é¢˜ï¼šgoroutineå·²ç»æ‰§è¡Œå®Œæ¯•äº†å¦‚ä½•å»é€šçŸ¥mainçº¿ç¨‹ï¼Ÿ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">var</span> <span class="nx">complete</span> <span class="kd">chan</span> <span class="kt">int</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>

<span class="kd">func</span> <span class="nf">loop</span><span class="p">(</span><span class="p">)</span>  <span class="p">{</span>
	<span class="k">for</span> <span class="nx">i</span><span class="o">:=</span><span class="mi">0</span> <span class="p">;</span> <span class="nx">i</span><span class="p">&lt;</span><span class="mi">10</span> <span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Print</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">complete</span> <span class="o">&lt;-</span> <span class="mi">0</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span>  <span class="p">{</span>
	<span class="k">go</span> <span class="nf">loop</span><span class="p">(</span><span class="p">)</span>
	<span class="o">&lt;-</span> <span class="nx">complete</span> <span class="c1">//ç›´åˆ°çº¿ç¨‹è·‘å®Œï¼Œå–åˆ°æ¶ˆæ¯
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="channelé˜»å¡goroutine">ğŸ’channelé˜»å¡goroutine</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">var</span> <span class="nx">channel</span> <span class="kd">chan</span> <span class="kt">int</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span>  <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">messages</span> <span class="kd">chan</span> <span class="kt">string</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">string</span><span class="p">)</span>
	<span class="k">go</span> <span class="kd">func</span> <span class="p">(</span><span class="nx">message</span> <span class="kt">string</span><span class="p">)</span>  <span class="p">{</span>
		<span class="nx">messages</span> <span class="o">&lt;-</span> <span class="nx">message</span> <span class="c1">// channelå­˜æ¶ˆæ¯
</span><span class="c1"></span>    <span class="c1">// è‹¥æœªå–å‡ºè¿™æ¡æ¶ˆæ¯ï¼Œè¿™ä¸ªåç¨‹å°†è¢«é˜»å¡
</span><span class="c1"></span>	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="o">&lt;-</span><span class="nx">messages</span><span class="p">)</span><span class="c1">//channelå–æ¶ˆæ¯ï¼Œæ¶ˆæ¯è¢«å–åï¼Œé˜»å¡è§£é™¤
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>å–æ•°æ®ï¼šæ— ç¼“å†²çš„ä¿¡é“ä¸å­˜å‚¨æ•°æ®ï¼Œåªè´Ÿè´£æ•°æ®çš„æµé€šï¼Œä»ä¿¡é“å–æ•°æ®æ—¶ï¼Œè‹¥æ²¡æœ‰æ•°æ®åœ¨ä¿¡é“ä¸­ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹é˜»å¡</li>
<li>å­˜æ•°æ®ï¼šæ²¡æœ‰å…¶ä»–goroutineæ‹¿èµ°æ•°æ®ï¼Œæ•°æ®è¿˜åœ¨ä¿¡é“ä¸­ï¼Œå½“å‰è¿™ä¸ªçº¿ç¨‹ä¹Ÿé˜»å¡</li>
</ul>

<h6 id="æ— ç¼“å†²channelå¼•èµ·çš„æ­»é”æ¡ˆä¾‹">ğŸ’æ— ç¼“å†²channelå¼•èµ·çš„æ­»é”æ¡ˆä¾‹</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="c1">//ä¾‹å­1
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span>  <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">ch</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="p">,</span><span class="kt">int</span><span class="p">)</span>
	<span class="nx">ch</span> <span class="o">&lt;-</span> <span class="mi">1</span><span class="c1">//æ­»é”äº†ï¼Œæ²¡æœ‰çº¿ç¨‹å–èµ°è¿™ä¸ªæ•°æ®
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;wrong&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//ä¾‹å­2
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">ch1</span> <span class="kd">chan</span> <span class="kt">int</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">ch2</span> <span class="kd">chan</span> <span class="kt">int</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>
<span class="kd">func</span> <span class="nf">say</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span>  <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
	<span class="nx">ch1</span> <span class="o">&lt;-</span> <span class="o">&lt;-</span> <span class="nx">ch2</span><span class="c1">//ch1ç­‰å¾…ch2çš„è¾“å‡º
</span><span class="c1"></span><span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span>  <span class="p">{</span>
	<span class="k">go</span> <span class="nf">say</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">)</span>
	<span class="o">&lt;-</span> <span class="nx">ch1</span>
<span class="p">}</span>

<span class="c1">//ä¾‹å­3
</span><span class="c1"></span><span class="nx">c</span><span class="p">,</span> <span class="nx">quit</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span><span class="p">,</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>
<span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">c</span> <span class="o">&lt;-</span> <span class="mi">1</span>  <span class="c1">// cé€šé“çš„æ•°æ®æ²¡æœ‰è¢«å…¶ä»–goroutineè¯»å–èµ° å µå¡å½“å‰goroutine
</span><span class="c1"></span>   <span class="nx">quit</span> <span class="o">&lt;-</span> <span class="mi">0</span> <span class="c1">// quitå§‹ç»ˆæ²¡æœ‰åŠæ³•å†™å…¥æ•°æ®
</span><span class="c1"></span><span class="p">}</span><span class="p">(</span><span class="p">)</span>
<span class="o">&lt;-</span> <span class="nx">quit</span> <span class="c1">// quit ç­‰å¾…æ•°æ®çš„å†™
</span><span class="c1"></span>
<span class="c1">//åä¾‹
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">c</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>
    <span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
       <span class="nx">c</span> <span class="o">&lt;-</span> <span class="mi">1</span>
    <span class="p">}</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span><span class="o">/</span><span class="o">/</span><span class="nx">mainæœªç­‰å¾…å…¶ä»–goroutine</span> <span class="nx">è‡ªå·±å…ˆè¿è¡Œå®Œæ¯•äº†</span> <span class="nx">æ²¡æœ‰æ•°æ®æµå…¥cé€šé“</span> <span class="nx">ä¸€å…±æ‰§è¡Œäº†ä¸€ä¸ªgoroutine</span> <span class="nx">æ²¡æœ‰é˜»å¡</span> <span class="nx">æ²¡æœ‰æ­»é”</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="ç¼“å†²channel">ğŸµç¼“å†²channel</h3>

<p>å®¹é‡æœªæ»¡ä¸ä¼šé˜»å¡ï¼Œæ— ç¼“å†²ä¿¡é“ä»ä¸å­˜å‚¨æ•°æ®ï¼Œæµå…¥çš„æ•°æ®å¿…é¡»æµå‡ºæ‰è¡Œï¼Œå¦åˆ™å°†é˜»å¡å½“å‰çº¿ç¨‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">var</span> <span class="nx">ch</span> <span class="kd">chan</span> <span class="kt">int</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">// å†™å…¥2ä¸ªå…ƒç´ éƒ½ä¸ä¼šé˜»å¡å½“å‰goroutine, å­˜å‚¨ä¸ªæ•°è¾¾åˆ°2çš„æ—¶å€™ä¼šé˜»å¡
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ch</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="nx">ch</span> <span class="o">&lt;-</span> <span class="mi">1</span>
    <span class="nx">ch</span> <span class="o">&lt;-</span> <span class="mi">2</span>
    <span class="nx">ch</span> <span class="o">&lt;-</span> <span class="mi">3</span>
<span class="p">}</span><span class="o">/</span><span class="o">/</span><span class="nx">è‹¥å†æµå…¥ä¸€ä¸ªæ•°æ®</span> <span class="nx">ä¿¡é“chä¼šé˜»å¡mainçº¿ç¨‹</span> <span class="nx">æŠ¥æ­»é”</span></code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/golang/" term="golang" label="golang" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/go%E5%9F%BA%E7%A1%80/" term="goåŸºç¡€" label="goåŸºç¡€" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Golangç³»åˆ—æ•™ç¨‹--åç¨‹Goroutine</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/golang-goroutine/" />
            <id>https://jjmeg.github.io/posts/golang-goroutine/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2019-12-17T10:02:21+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ã€Œgoroutineã€ Goä¸­å®ç°å¹¶å‘çš„æ‰‹æ®µï¼ŒGoroutineçš„åˆ›å»ºå’Œé”€æ¯çš„ä»£ä»·æ›´å°â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<p><center>ã€Œgoroutineã€</center>
<p style="text-indent:2em">Goä¸­å®ç°å¹¶å‘çš„æ‰‹æ®µï¼ŒGoroutineçš„åˆ›å»ºå’Œé”€æ¯çš„ä»£ä»·æ›´å°ï¼Œè°ƒåº¦ä¹Ÿç‹¬ç«‹äºçº¿ç¨‹ï¼Œå› æ­¤Goroutineå¯è§†ä¸ºè½»é‡çº§çš„çº¿ç¨‹ï¼Œåˆç§°åç¨‹ã€‚</p></p>

<h1 id="æœ¬æ–‡å†…å®¹">ğŸ“œæœ¬æ–‡å†…å®¹</h1>

<ul>
<li>ğŸ“š<a href="#goroutineçš„å£°æ˜">goroutineçš„å£°æ˜</a></li>
<li>ğŸ“š<a href="#goroutineä¾‹å­">goroutineä¾‹å­</a>

<ul>
<li>ğŸ“–<a href="#æœªå¼•å…¥goroutine">æœªå¼•å…¥goroutine</a></li>
<li>ğŸ“–<a href="#å¼•å…¥goroutine">å¼•å…¥goroutine</a></li>
<li>ğŸ“–<a href="#å®ç°goroutineç»“æŸ">å®ç°goroutineç»“æŸ</a></li>
</ul></li>
</ul>

<hr />

<h3 id="goroutineçš„å£°æ˜">goroutineçš„å£°æ˜</h3>

<p>åœ¨å‡½æ•°å‰æ·»åŠ <code>go</code>å…³é”®å­—å³å¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="nf">say</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello world&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span>  <span class="p">{</span>
  <span class="nf">say</span><span class="p">(</span><span class="p">)</span>
  <span class="k">go</span> <span class="nf">say</span><span class="p">(</span><span class="p">)</span><span class="c1">// åˆ›å»ºäº†ä¸€ä¸ªæ–°åç¨‹
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="goroutineä¾‹å­">goroutineä¾‹å­</h3>

<h6 id="æœªå¼•å…¥goroutine">æœªå¼•å…¥goroutine</h6>

<p>ç¨‹åºä¸²è¡Œæ‰§è¡Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">loop</span><span class="p">(</span><span class="nx">round</span> <span class="kt">string</span><span class="p">)</span>  <span class="p">{</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;=</span><span class="mi">3</span> <span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Round:%s,\ti:%d\n&#34;</span><span class="p">,</span><span class="nx">round</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span>  <span class="p">{</span>
	<span class="nf">loop</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">)</span>
	<span class="nf">loop</span><span class="p">(</span><span class="s">&#34;B&#34;</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>loopæ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œå…ˆæ‰§è¡Œloop(1)ï¼Œå†æ‰§è¡Œloop(2)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">Round:A,	i:1
Round:A,	i:2
Round:A,	i:3
Round:B,	i:1
Round:B,	i:2
Round:B,	i:3</code></pre></td></tr></table>
</div>
</div>
<h6 id="å¼•å…¥goroutine">å¼•å…¥goroutine</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">loop</span><span class="p">(</span><span class="nx">round</span> <span class="kt">string</span><span class="p">)</span>  <span class="p">{</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;=</span><span class="mi">3</span> <span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Round:%s,\ti:%d\n&#34;</span><span class="p">,</span><span class="nx">round</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span>  <span class="p">{</span>
	<span class="k">go</span> <span class="nf">loop</span><span class="p">(</span><span class="s">&#34;B&#34;</span><span class="p">)</span>
  <span class="nf">loop</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>åªè¿è¡Œäº†Aè½®ç»“æœï¼Œä¸»çº¿ç¨‹è¿è¡Œï¼Œä¸»çº¿ç¨‹ä¹Ÿæ˜¯ä¸€ä¸ªgoroutineï¼Œloop(&quot;A&quot;)åœ¨ä¸»çº¿ç¨‹ä¸­
ä¸­è¿è¡Œloop(&quot;A&quot;)ï¼Œæ–°èµ·ä¸€ä¸ªgoroutineè¿è¡Œloop(&quot;B&quot;)ï¼Œgoroutineæ²¡æ¥å¾—åŠè·‘loop(&quot;B&quot;)ï¼Œä¸»çº¿ç¨‹å·²ç»ç»“æŸï¼Œæ‰€ä»¥åªæœ‰loop(&quot;A&quot;)çš„ç»“æœ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">Round:A,	i:1
Round:A,	i:2
Round:A,	i:3</code></pre></td></tr></table>
</div>
</div>
<h6 id="ç­‰å¾…goroutineç»“æŸ">ç­‰å¾…goroutineç»“æŸ</h6>

<p><strong>1. ä¸»çº¿ç¨‹ç­‰å¾…</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
  <span class="s">&#34;fmt&#34;</span>
  <span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">loop</span><span class="p">(</span><span class="nx">round</span> <span class="kt">string</span><span class="p">)</span>  <span class="p">{</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;=</span><span class="mi">3</span> <span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Round:%s,\ti:%d\n&#34;</span><span class="p">,</span><span class="nx">round</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span>  <span class="p">{</span>
	<span class="k">go</span> <span class="nf">loop</span><span class="p">(</span><span class="s">&#34;B&#34;</span><span class="p">)</span>
  <span class="nf">loop</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">)</span>
  <span class="k">go</span> <span class="nf">loop</span><span class="p">(</span><span class="s">&#34;C&#34;</span><span class="p">)</span>
  <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>å…ˆè¿è¡ŒAè½®å†è¿è¡ŒBè½®ï¼Œä¸»çº¿ç¨‹å»ºç«‹åï¼Œæ–°èµ·ä¸€ä¸ªgoroutineè¿è¡Œloop(&quot;B&quot;)ï¼Œä¸»çº¿ç¨‹æ‰§è¡ŒAè½®ï¼ŒAè½®æ‰§è¡Œå®Œï¼Œæœ‰ä¸€ç§’é’Ÿç­‰å¾…æ—¶é—´ï¼Œgoroutineæ¥å¾—åŠè·‘loop(&quot;B&quot;)ï¼Œå†å‡ºç°Bè½®çš„ç»“æœ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">Round:A,	i:1
Round:A,	i:2
Round:A,	i:3
Round:B,	i:1
Round:B,	i:2
Round:B,	i:3</code></pre></td></tr></table>
</div>
</div>
<p><strong>2. ä½¿ç”¨sync.WaitGroupå®ç°ç­‰å¾…goroutineç»“æŸ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&#34;fmt&#34;</span>
    <span class="s">&#34;sync&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">goRun</span><span class="p">(</span><span class="nx">round</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">wg</span> <span class="o">*</span><span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span><span class="p">)</span>  <span class="p">{</span>
  <span class="k">defer</span> <span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">(</span><span class="p">)</span>
  <span class="nf">loop</span><span class="p">(</span><span class="nx">round</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">loop</span><span class="p">(</span><span class="nx">round</span> <span class="kt">string</span><span class="p">)</span>  <span class="p">{</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;=</span><span class="mi">3</span> <span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Round:%s,\ti:%d\n&#34;</span><span class="p">,</span><span class="nx">round</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span>  <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">wg</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span>

  <span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
  <span class="k">go</span> <span class="nf">goRun</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">wg</span><span class="p">)</span>
  <span class="k">go</span> <span class="nf">goRun</span><span class="p">(</span><span class="s">&#34;B&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">wg</span><span class="p">)</span>
  <span class="k">go</span> <span class="nf">goRun</span><span class="p">(</span><span class="s">&#34;C&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">wg</span><span class="p">)</span>

  <span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>ä½¿ç”¨ <code>sync.WaitGroup</code> æ¥å®Œæˆç­‰å¾…çš„æ“ä½œï¼Œæ¯”èµ·<code>time.Sleep()</code>æ›´çµæ´»ï¼Œè¿™ç§ç­‰å¾…æ˜¯åç¨‹ä¹‹é—´å®ç°åŒæ­¥çš„åŠæ³•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">Round:C,	i:1
Round:C,	i:2
Round:C,	i:3
Round:A,	i:1
Round:A,	i:2
Round:A,	i:3
Round:B,	i:1
Round:B,	i:2
Round:B,	i:3</code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/golang/" term="golang" label="golang" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/go%E5%9F%BA%E7%A1%80/" term="goåŸºç¡€" label="goåŸºç¡€" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Golangç³»åˆ—æ•™ç¨‹--æ¥å£Interface</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/golang-interface/" />
            <id>https://jjmeg.github.io/posts/golang-interface/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2019-12-17T09:52:40+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ã€Œinterfaceã€ æ¥å£ï¼Œå³ä¸€äº›æ–¹æ³•çš„é›†åˆï¼Œåœ¨Goä¸­ï¼Œinterfaceä¹Ÿæ˜¯ä¸€ç§ç±»â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<p><center>ã€Œinterfaceã€</center>
<p style="text-indent:2em">æ¥å£ï¼Œå³ä¸€äº›æ–¹æ³•çš„é›†åˆï¼Œåœ¨Goä¸­ï¼Œinterfaceä¹Ÿæ˜¯ä¸€ç§ç±»å‹ï¼Œå±äºæŒ‡é’ˆç±»å‹ï¼Œå¸¸ç”¨æ¥å£å®ç°å¤šæ€ã€‚</p></p>

<h1 id="æœ¬æ–‡å†…å®¹">ğŸ“œæœ¬æ–‡å†…å®¹</h1>

<ul>
<li>ğŸ“š<a href="#interfaceçš„å£°æ˜">interfaceçš„å£°æ˜</a></li>
<li>ğŸ“š<a href="#interfaceçš„å®ç°">interfaceçš„å®ç°</a></li>
<li>ğŸ“š<a href="#interfaceåµŒå¥—">interfaceåµŒå¥—</a></li>
</ul>

<hr />

<h3 id="interfaceçš„å£°æ˜">ğŸµinterfaceçš„å£°æ˜</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">æ¥å£å</span> <span class="kd">interface</span><span class="p">{</span>
  <span class="nx">æ–¹æ³•1</span>
  <span class="nx">æ–¹æ³•2</span>
  <span class="o">...</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">AInterface</span> <span class="kd">interface</span><span class="p">{</span>
  <span class="nf">Say</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="interfaceçš„å®ç°">ğŸµinterfaceçš„å®ç°</h3>

<p><strong>1. æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•æ²¡æœ‰æ–¹æ³•ä½“ï¼Œéƒ½æ²¡æœ‰å®ç°ç»†èŠ‚ï¼Œä¹Ÿä¸èƒ½åŒ…å«å˜é‡</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">AInterface</span> <span class="kd">interface</span><span class="p">{</span>
  <span class="nf">Say</span><span class="p">(</span><span class="p">)</span>
  <span class="nx">Name</span> <span class="kt">string</span> <span class="c1">//è¿™é‡Œä¼šæŠ¥é”™ï¼Œä¸å¯ä»¥åŒ…å«å˜é‡
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><strong>2. æ¥å£ä¸èƒ½åˆ›å»ºå®ä¾‹ï¼Œä½†å¯ä»¥æŒ‡å‘ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹çš„å˜é‡ï¼Œåªè¦æ˜¯è‡ªå®šä¹‰ç±»å‹å‡å¯ä»¥å®ç°æ¥å£ï¼Œä¾‹å¦‚ç»“æ„ä½“å¯ä»¥å®ç°æ¥å£</strong></p>

<ul>
<li><p>é”™è¯¯ç¤ºä¾‹ï¼šéè‡ªå®šä¹‰ç±»å‹å®ç°è‡ªå®šä¹‰æ¥å£
intç±»å‹æ˜¯Goçš„å†…ç½®ç±»å‹ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„AInterfaceæ¥å£åœ¨Goä¸­æœªå®ç°ï¼Œå› æ­¤è‡ªå®šä¹‰æ¥å£éœ€è¦ç”±è‡ªå®šä¹‰çš„ç±»å‹å®ç°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">AInterface</span> <span class="kd">interface</span><span class="p">{</span>
<span class="nf">Say</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">i</span> <span class="kt">int</span><span class="p">)</span> <span class="nf">Say</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="c1">// è¿™é‡ŒæŠ¥é”™ï¼šcannot define new methods on non-local type int
</span><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
<span class="kd">var</span> <span class="nx">i</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">10</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="nx">AInterface</span> <span class="p">=</span> <span class="nx">i</span> <span class="c1">// cannot use i (type int) as type AInterface in assignment:
</span><span class="c1"></span>	                     <span class="c1">// int does not implement AInterface (missing Say method)
</span><span class="c1"></span><span class="nx">b</span><span class="p">.</span><span class="nf">Say</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div></li>

<li><p>æ­£ç¡®ç¤ºä¾‹ï¼šè‡ªå®šä¹‰ç±»å‹å®ç°è‡ªå®šä¹‰æ¥å£</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">AInterface</span> <span class="kd">interface</span><span class="p">{</span>
<span class="nf">Say</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// è‡ªå®šä¹‰äº†ç±»å‹integer
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">integer</span> <span class="kt">int</span>

<span class="c1">// ç”¨integerå»å®ç°AInterfaceæ¥å£
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">i</span> <span class="nx">integer</span><span class="p">)</span> <span class="nf">Say</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
<span class="kd">var</span> <span class="nx">i</span> <span class="nx">integer</span> <span class="p">=</span> <span class="mi">10</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="nx">AInterface</span> <span class="p">=</span> <span class="nx">i</span>
<span class="nx">b</span><span class="p">.</span><span class="nf">Say</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">hello</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<p><strong>3. å®ç°æŸä¸ªæ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•æ‰èƒ½ç§°å¾—ä¸Šæ˜¯æ¥å£å®ç°</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">AInterface</span> <span class="kd">interface</span><span class="p">{</span>
  <span class="nf">Say</span><span class="p">(</span><span class="p">)</span>
  <span class="nf">Write</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">integer</span> <span class="kt">int</span>

<span class="c1">// ç”¨integerå»åªå®ç°äº†æ¥å£ä¸­çš„Sayæ–¹æ³•
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">i</span> <span class="nx">integer</span><span class="p">)</span> <span class="nf">Say</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="nx">integer</span> <span class="p">=</span> <span class="mi">10</span>
  <span class="kd">var</span> <span class="nx">b</span> <span class="nx">AInterface</span> <span class="p">=</span> <span class="nx">i</span>
  <span class="nx">b</span><span class="p">.</span><span class="nf">Say</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>ç”±äºåªå®ç°äº†éƒ¨åˆ†æ–¹æ³•ï¼Œç¼–è¯‘å°†æŠ¥é”™ï¼Œæç¤ºæœªå®ç°Writeæ–¹æ³•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">cannot use i <span class="o">(</span><span class="nb">type</span> integer<span class="o">)</span> as <span class="nb">type</span> AInterface in assignment:
	integer does not implement AInterface <span class="o">(</span>missing Write method<span class="o">)</span></code></pre></td></tr></table>
</div>
</div>
<p><strong>4. ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹å¯ä»¥å®ç°å¤šä¸ªæ¥å£</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">AInterface</span> <span class="kd">interface</span><span class="p">{</span>
  <span class="nf">Say</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">BInterface</span> <span class="kd">interface</span><span class="p">{</span>
  <span class="nf">Write</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">integer</span> <span class="kt">int</span>

<span class="c1">// å®ç°AInterfaceæ¥å£
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">i</span> <span class="nx">integer</span><span class="p">)</span> <span class="nf">Say</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// åŒæ—¶å®ç°BInterfaceæ¥å£B
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">i</span> <span class="nx">integer</span><span class="p">)</span> <span class="nf">Write</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;world&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="nx">integer</span> <span class="p">=</span> <span class="mi">10</span>
  <span class="kd">var</span> <span class="nx">b</span> <span class="nx">AInterface</span> <span class="p">=</span> <span class="nx">i</span>
  <span class="nx">b</span><span class="p">.</span><span class="nf">Say</span><span class="p">(</span><span class="p">)</span>

  <span class="kd">var</span> <span class="nx">c</span> <span class="nx">BInterface</span> <span class="p">=</span> <span class="nx">i</span>
  <span class="nx">c</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">hello
world</code></pre></td></tr></table>
</div>
</div>
<h3 id="interfaceåµŒå¥—">ğŸµinterfaceåµŒå¥—</h3>

<p>æ¥å£å¯ä»¥åµŒå¥—æ¥å£ï¼Œä½†å®ç°æ¥å£æ—¶å¿…é¡»å…¨éƒ¨å®ç°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">AInterface</span> <span class="kd">interface</span><span class="p">{</span>
  <span class="nf">Say</span><span class="p">(</span><span class="p">)</span>
  <span class="nx">BInterface</span><span class="c1">//åµŒå¥—Bæ¥å£
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">type</span> <span class="nx">BInterface</span> <span class="kd">interface</span><span class="p">{</span>
  <span class="nf">Write</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">integer</span> <span class="kt">int</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">i</span> <span class="nx">integer</span><span class="p">)</span> <span class="nf">Say</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">i</span> <span class="nx">integer</span><span class="p">)</span> <span class="nf">Write</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;world&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="nx">integer</span> <span class="p">=</span> <span class="mi">10</span>
  <span class="kd">var</span> <span class="nx">b</span> <span class="nx">AInterface</span> <span class="p">=</span> <span class="nx">i</span>
  <span class="nx">b</span><span class="p">.</span><span class="nf">Say</span><span class="p">(</span><span class="p">)</span>

  <span class="kd">var</span> <span class="nx">c</span> <span class="nx">BInterface</span> <span class="p">=</span> <span class="nx">i</span>
  <span class="nx">c</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/golang/" term="golang" label="golang" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/go%E5%9F%BA%E7%A1%80/" term="goåŸºç¡€" label="goåŸºç¡€" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Golangç³»åˆ—æ•™ç¨‹--ç»“æ„ä½“structå’Œæ–¹æ³•method</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/golang-struct-and-method/" />
            <id>https://jjmeg.github.io/posts/golang-struct-and-method/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2019-12-13T15:02:59+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ã€ŒstructğŸ’methodã€ Goæ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œå°†å¤šä¸ªä¸åŒç±»å‹çš„æ•°æ®é›†åˆåœ¨ä¸€èµ·ï¼Œå¯ä»¥â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<p><center>ã€ŒstructğŸ’methodã€</center>
<p style="text-indent:2em">Goæ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œå°†å¤šä¸ªä¸åŒç±»å‹çš„æ•°æ®é›†åˆåœ¨ä¸€èµ·ï¼Œå¯ä»¥ç”¨åˆ°structï¼Œmethodåˆ™æ˜¯èµ‹ç»™æŸå˜é‡çš„å‡½æ•°ã€‚</p></p>

<h1 id="æœ¬æ–‡å†…å®¹">ğŸ“œæœ¬æ–‡å†…å®¹</h1>

<ul>
<li>ğŸ“š<a href="#struct">struct</a>

<ul>
<li>ğŸ“–<a href="#structçš„å£°æ˜">structçš„å£°æ˜</a></li>
<li>ğŸ“–<a href="#structçš„åˆå§‹åŒ–">structçš„åˆå§‹åŒ–</a></li>
<li>ğŸ“–<a href="#structçš„åµŒå¥—">structçš„åµŒå¥—</a></li>
<li>ğŸ“–<a href="#æˆå‘˜çš„å¯è§æ€§">æˆå‘˜çš„å¯è§æ€§</a></li>
</ul></li>
<li>ğŸ“š<a href="#method">method</a>

<ul>
<li>ğŸ“–<a href="#methodçš„å£°æ˜">methodçš„å£°æ˜</a></li>
<li>ğŸ“–<a href="#ä¸€äº›çº¦æŸ">ä¸€äº›çº¦æŸ</a></li>
</ul></li>
</ul>

<hr />

<h1 id="struct">ğŸµstruct</h1>

<h6 id="structçš„å£°æ˜">ğŸ’structçš„å£°æ˜</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">ç»“æ„å</span> <span class="kd">struct</span><span class="p">{</span>
  <span class="nx">å˜é‡å1</span> <span class="nx">å˜é‡ç±»å‹</span>
  <span class="nx">å˜é‡å2</span> <span class="nx">å˜é‡ç±»å‹</span>
  <span class="o">...</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>ä¾‹å¦‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Name</span>     <span class="kt">string</span>
	<span class="nx">Age</span>      <span class="kt">int</span>
	<span class="nx">Region</span>   <span class="kt">string</span>
<span class="p">}</span>
<span class="c1">// ä¹Ÿå¯ä»¥ç®€å†™ä¸º
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Name</span><span class="p">,</span> <span class="nx">Region</span>   <span class="kt">string</span>
	<span class="nx">Age</span>              <span class="kt">int</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="structçš„åˆå§‹åŒ–">ğŸ’structçš„åˆå§‹åŒ–</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Name</span>     <span class="kt">string</span>
	<span class="nx">Age</span>      <span class="kt">int</span>
	<span class="nx">Region</span>   <span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// å£°æ˜
</span><span class="c1"></span>  <span class="c1">// 1. æŒ‡å®šå˜é‡ç±»å‹
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">amy</span> <span class="nx">Person</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">amy</span><span class="p">)</span>

  <span class="c1">// 2. æ„é€ ç©ºç»“æ„ä½“ï¼Œä¹Ÿå¯ä»¥å®Œæˆå£°æ˜
</span><span class="c1"></span>  <span class="nx">lily</span> <span class="o">:=</span> <span class="nx">Person</span><span class="p">{</span><span class="p">}</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">lily</span><span class="p">)</span>

  <span class="c1">// ç»“æ„ä½“å˜é‡åˆå§‹åŒ–
</span><span class="c1"></span>  <span class="c1">// 1. å¯¹ç›¸åº”å­—æ®µèµ‹å€¼
</span><span class="c1"></span>	<span class="nx">amy</span><span class="p">.</span><span class="nx">Name</span> <span class="p">=</span> <span class="s">&#34;amy&#34;</span>
	<span class="nx">amy</span><span class="p">.</span><span class="nx">Age</span> <span class="p">=</span> <span class="mi">10</span>
	<span class="nx">amy</span><span class="p">.</span><span class="nx">Region</span> <span class="p">=</span> <span class="s">&#34;China&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">amy</span><span class="p">)</span>

  <span class="c1">// 2. ç›´æ¥å†™åœ¨ç»“æ„ä½“ä¸­
</span><span class="c1"></span>  <span class="nx">lily</span> <span class="p">=</span> <span class="nx">Person</span><span class="p">{</span>
    <span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;lily&#34;</span><span class="p">,</span>
    <span class="nx">Age</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="nx">Region</span><span class="p">:</span> <span class="s">&#34;China&#34;</span><span class="p">,</span>
  <span class="p">}</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">lily</span><span class="p">)</span>

  <span class="c1">// ä¿®æ”¹ç»“æ„ä½“ä¸­çš„å˜é‡
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">p</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">amy</span>
	<span class="nx">p</span><span class="p">.</span><span class="nx">Region</span> <span class="p">=</span> <span class="s">&#34;USA&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">amy</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">{</span> <span class="m">0</span> <span class="o">}</span>
<span class="o">{</span> <span class="m">0</span> <span class="o">}</span>
<span class="o">{</span>amy <span class="m">10</span> China<span class="o">}</span>
<span class="o">{</span>lily <span class="m">10</span> China<span class="o">}</span>
<span class="o">{</span>amy <span class="m">10</span> USA<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="structçš„åµŒå¥—">ğŸ’structçš„åµŒå¥—</h6>

<p><strong>1. åµŒå…¥æœ¬èº«çš„ç»“æ„ä½“ï¼Œä½¿ç”¨æŒ‡é’ˆåµŒå…¥</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">Tree</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Value</span>     <span class="kt">int</span>
	<span class="nx">Left</span>      <span class="o">*</span><span class="nx">Tree</span>
	<span class="nx">Right</span>     <span class="o">*</span><span class="nx">Tree</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><strong>2. åµŒå…¥å…¶ä»–ç»“æ„ä½“</strong></p>

<p>å˜ç›¸å®ç°äº†ç»§æ‰¿ï¼ŒPersonæ‹¥æœ‰äº†Regionçš„æ‰€æœ‰å±æ€§</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
  <span class="nx">Name</span>      <span class="kt">string</span>
  <span class="nx">Age</span>       <span class="kt">int</span>
  <span class="nx">Location</span>  <span class="nx">Region</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Region</span> <span class="kd">struct</span> <span class="p">{</span>
  <span class="nx">Country</span> <span class="kt">string</span>
  <span class="nx">City</span>    <span class="kt">string</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><strong>3. åµŒå…¥åŒ¿åæˆå‘˜</strong></p>

<p>åŒ¿åæˆå‘˜å³æ²¡æœ‰å˜é‡å‘½åçš„æˆå‘˜ï¼Œå¯ä»¥ç›´æ¥è®¿é—®åŒ¿åæˆå‘˜ç»“æ„ä½“å†…çš„å˜é‡</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
  <span class="nx">Name</span>      <span class="kt">string</span>
  <span class="nx">Age</span>       <span class="kt">int</span>
  <span class="nx">Region</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Region</span> <span class="kd">struct</span> <span class="p">{</span>
  <span class="nx">Country</span> <span class="kt">string</span>
  <span class="nx">City</span>    <span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">region</span> <span class="o">:=</span> <span class="nx">Region</span><span class="p">{</span>
    <span class="nx">Country</span><span class="p">:</span>  <span class="s">&#34;China&#34;</span><span class="p">,</span>
    <span class="nx">City</span><span class="p">:</span>     <span class="s">&#34;Beijing&#34;</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="nx">lily</span> <span class="o">:=</span> <span class="nx">Person</span><span class="p">{</span>
    <span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;lily&#34;</span><span class="p">,</span>
    <span class="nx">Age</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="nx">Region</span><span class="p">:</span> <span class="nx">region</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="c1">// å¯ä»¥ç›´æ¥è®¿é—®Regionä¸­çš„Countryå’ŒCity
</span><span class="c1"></span>  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Her country is: &#34;</span><span class="p">,</span> <span class="nx">lily</span><span class="p">.</span><span class="nx">Country</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">Her country is:  China</code></pre></td></tr></table>
</div>
</div>
<h6 id="æˆå‘˜çš„å¯è§æ€§">ğŸ’æˆå‘˜çš„å¯è§æ€§</h6>

<p>æˆå‘˜çš„å¯è§æ€§æ˜¯å¯¹å¤–éƒ¨packageè€Œè¨€çš„ï¼Œè‹¥æŸä¸ªå˜é‡å¯¹å¤–éƒ¨åŒ…å¯è§ï¼Œé‚£ä¹ˆç§°è¿™ä¸ªå˜é‡æ˜¯å¯å¯¼å‡ºçš„ï¼Œåœ¨Goä¸­ï¼Œé€šè¿‡æˆå‘˜é¦–å­—æ¯å¤§å°å†™è¡¨æ˜å¯è§æ€§ï¼Œå¤§å†™ä¸ºå¯å¯¼å‡ºï¼Œå°å†™ä¸å¯å¯¼å‡ºï¼Œä¸å¯å¯¼å‡ºçš„æˆå‘˜åªèƒ½åœ¨åŒä¸€ä¸ªåŒ…å†…è®¿é—®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">person</span>

<span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Name</span>     <span class="kt">string</span>
	<span class="nx">Age</span>      <span class="kt">int</span>
	<span class="nx">loaction</span> <span class="kt">string</span>
<span class="p">}</span>
<span class="o">/</span><span class="o">/</span> <span class="nx">Personç»“æ„ä½“å¯¹å¤–å¯è§</span><span class="err">ï¼Œ</span><span class="nx">ä½†æ˜¯å…¶å†…éƒ¨çš„å˜é‡åªæœ‰Nameå’ŒAgeæˆå‘˜å¯¹å¤–å¯è§</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">lily</span> <span class="o">:=</span> <span class="nx">Person</span><span class="p">{</span>
    <span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;lily&#34;</span><span class="p">,</span>
    <span class="nx">Age</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="nx">location</span><span class="p">:</span> <span class="s">&#34;China&#34;</span><span class="p">,</span><span class="c1">//è¿™é‡Œä¼šæŠ¥é”™ï¼Œå¤–éƒ¨çš„mainåŒ…æ— æ³•æ–¹ä½personåŒ…ä¸­Personç»“æ„ä½“çš„ä¸å¯è§æˆå‘˜
</span><span class="c1"></span>  <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<hr />

<h1 id="method">ğŸµmethod</h1>

<p>method æ–¹æ³•ï¼Œé™„å±ç»™ä¸€ä¸ªæ¥æ”¶è€…çš„å‡½æ•°ï¼Œæ¥æ”¶è€…æ˜¯æŸç§ç±»å‹çš„å˜é‡</p>

<h6 id="methodçš„å£°æ˜">ğŸ’methodçš„å£°æ˜</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">æ¥æ”¶è€…å˜é‡åç§°</span> <span class="nx">æ¥æ”¶è€…å˜é‡ç±»å‹</span><span class="p">)</span> <span class="nx">æ–¹æ³•å</span><span class="p">(</span><span class="p">)</span> <span class="nx">è¿”å›å€¼</span> <span class="p">{</span>
  <span class="o">...</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="p">(</span><span class="nx">person</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">Print</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
  <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="ä¸€äº›çº¦æŸ">ğŸ’ä¸€äº›çº¦æŸ</h6>

<ul>
<li>åªèƒ½ä¸ºå½“å‰æ‰€åœ¨åŒ…å†…çš„ç±»å‹å®šä¹‰æ–¹æ³•</li>
<li>æ¥æ”¶è€…å¯ä¸ºå€¼ç±»å‹å’ŒæŒ‡é’ˆç±»å‹ï¼Œä¸å¯ä¸ºæ¥å£ç±»å‹å’ŒæŒ‡é’ˆçš„æŒ‡é’ˆç±»å‹</li>

<li><p>æ¥æ”¶è€…ä¸ºæŒ‡é’ˆç±»å‹æ—¶ï¼Œå¯ç”¨äºä¿®æ”¹å…¶å†…å®¹ï¼Œæ¥æ”¶è€…ä¸ºå€¼ç±»å‹æ—¶ä¸ä¼šæ”¹åŠ¨å…¶å†…å®¹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="c1">// æ¥æ”¶è€…ä¸ºæŒ‡é’ˆç±»å‹
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">person</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">Setname</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>

<span class="nx">person</span><span class="p">.</span><span class="nf">Setname</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>

<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>
<span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
<span class="c1">// æ¥æ”¶è€…ä¸ºå€¼ç±»å‹
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">person</span> <span class="nx">Person</span><span class="p">)</span> <span class="nf">Print</span><span class="p">(</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">person</span><span class="p">)</span>
<span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<p><strong>åŒä¸€ä¸ªæ¥æ”¶è€…çš„æ–¹æ³•ä¸å¯é‡åï¼Œè‹¥æ¥æ”¶è€…æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå…¶æ–¹æ³•åä¸å¯ä»¥å’Œè¯¥ç»“æ„ä½“å†…çš„æˆå‘˜é‡å</strong></p>
]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/golang/" term="golang" label="golang" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/go%E5%9F%BA%E7%A1%80/" term="goåŸºç¡€" label="goåŸºç¡€" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Golangç³»åˆ—æ•™ç¨‹--å‡½æ•°</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/golang-function/" />
            <id>https://jjmeg.github.io/posts/golang-function/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2019-12-13T14:44:55+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ã€Œå‡½æ•°ã€ å‡½æ•°æ˜¯å°†èƒ½å¤Ÿå®Œæˆä¸€å®šçš„åŠŸèƒ½çš„è¯­å¥çš„åŒ…è£…é›†åˆï¼Œä¾›å¤–éƒ¨è°ƒç”¨ã€‚ ğŸ“œæœ¬æ–‡å†…å®¹ ğŸ“šå‡½æ•°ç»“æ„â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<p><center>ã€Œå‡½æ•°ã€</center>
<center>å‡½æ•°æ˜¯å°†èƒ½å¤Ÿå®Œæˆä¸€å®šçš„åŠŸèƒ½çš„è¯­å¥çš„åŒ…è£…é›†åˆï¼Œä¾›å¤–éƒ¨è°ƒç”¨ã€‚</center></p>

<h1 id="æœ¬æ–‡å†…å®¹">ğŸ“œæœ¬æ–‡å†…å®¹</h1>

<ul>
<li>ğŸ“š<a href="#å‡½æ•°ç»“æ„">å‡½æ•°ç»“æ„</a>

<ul>
<li>ğŸ“–<a href="#å‚æ•°åŠè¿”å›å€¼ç¼ºçœ">å‚æ•°åŠè¿”å›å€¼ç¼ºçœ</a></li>
<li>ğŸ“–<a href="#å‚æ•°ç¼ºçœ">å‚æ•°ç¼ºçœ</a></li>
<li>ğŸ“–<a href="#è¿”å›å€¼ç¼ºçœ">è¿”å›å€¼ç¼ºçœ</a></li>
<li>ğŸ“–<a href="#å¤šè¿”å›å€¼">å¤šè¿”å›å€¼</a></li>
<li>ğŸ“–<a href="#å¤šå‚æ•°">å¤šå‚æ•°</a></li>
<li>ğŸ“–<a href="#å‚æ•°ä¸ºå¼•ç”¨ç±»å‹">å‚æ•°ä¸ºå¼•ç”¨ç±»å‹</a></li>
</ul></li>
<li>ğŸ“–<a href="#å‡½æ•°å›è°ƒ">å‡½æ•°å›è°ƒ</a></li>
<li>ğŸ“–<a href="#åŒ¿åå‡½æ•°">åŒ¿åå‡½æ•°</a></li>
<li>ğŸ“–<a href="#é—­åŒ…">é—­åŒ…</a></li>
</ul>

<hr />

<h1 id="å‡½æ•°ç»“æ„">ğŸµå‡½æ•°ç»“æ„</h1>

<p>åŒ…å«å‡½æ•°åï¼Œå‚æ•°å’Œè¿”å›å€¼ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå…¶ä¸­ï¼Œå‚æ•°åŠè¿”å›å€¼å¯ç¼ºçœ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="nx">å‡½æ•°å</span><span class="p">(</span> <span class="nx">å‚æ•°1</span><span class="p">,</span> <span class="nx">å‚æ•°2</span><span class="p">,</span> <span class="nx">å‚æ•°3</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span> <span class="p">(</span><span class="nx">è¿”å›å€¼ç±»å‹1</span><span class="p">,</span> <span class="nx">è¿”å›å€¼ç±»å‹2</span><span class="p">,</span> <span class="nx">è¿”å›å€¼ç±»å‹3</span><span class="p">)</span><span class="p">{</span>

<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="å‚æ•°åŠè¿”å›å€¼ç¼ºçœ">ğŸ’å‚æ•°åŠè¿”å›å€¼ç¼ºçœ</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="nf">HelloWorld</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Hello World!&#34;</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="å‚æ•°ç¼ºçœ">ğŸ’å‚æ•°ç¼ºçœ</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="c1">// å•è¿”å›å€¼
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">HelloWorld</span><span class="p">(</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s">&#34;Hello World!&#34;</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="è¿”å›å€¼ç¼ºçœ">ğŸ’è¿”å›å€¼ç¼ºçœ</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="nf">HelloWorld</span><span class="p">(</span><span class="nx">hello</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">hello</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="å¤šè¿”å›å€¼">ğŸ’å¤šè¿”å›å€¼</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="nf">HelloWorld</span><span class="p">(</span><span class="p">)</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">bool</span><span class="p">)</span><span class="p">{</span>
  <span class="k">return</span> <span class="s">&#34;Hello World!&#34;</span><span class="p">,</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="c1">// å‘½åè¿”å›å€¼
</span><span class="c1"></span><span class="c1">// useråŠageå‡è¢«åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">HelloWorld</span><span class="p">(</span><span class="p">)</span> <span class="p">(</span><span class="nx">user</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">age</span> <span class="kt">int</span><span class="p">)</span><span class="p">{</span>
  <span class="nx">user</span> <span class="p">=</span> <span class="s">&#34;heihei&#34;</span>
  <span class="nx">age</span> <span class="p">=</span> <span class="mi">10</span>
  <span class="k">return</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="å¤šå‚æ•°">ğŸ’å¤šå‚æ•°</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="c1">// å‚æ•°ä¸ªæ•°ç¡®å®š
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Sum</span><span class="p">(</span><span class="nx">num1</span><span class="p">,</span><span class="nx">num2</span><span class="p">,</span><span class="nx">num3</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span><span class="p">{</span>
  <span class="k">return</span> <span class="nx">num1</span> <span class="o">+</span> <span class="nx">num2</span> <span class="o">+</span> <span class="nx">num3</span>
<span class="p">}</span>


<span class="c1">// å‚æ•°ä¸ªæ•°ä¸ç¡®å®šï¼Œåˆ©ç”¨for rangeéå†å‚æ•°
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Sum</span><span class="p">(</span><span class="nx">nums</span> <span class="o">...</span><span class="kt">int</span><span class="p">)</span> <span class="kt">int</span><span class="p">{</span>
  <span class="nx">sum</span> <span class="o">:=</span> <span class="mi">0</span>

  <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">value</span> <span class="p">=</span> <span class="k">range</span> <span class="nx">nums</span><span class="p">{</span>
    <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">value</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">sum</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="å‚æ•°ä¸ºå¼•ç”¨ç±»å‹">ğŸ’å‚æ•°ä¸ºå¼•ç”¨ç±»å‹</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span> <span class="kt">int</span>
    <span class="nx">a</span> <span class="p">=</span> <span class="mi">1</span>
    <span class="nx">b</span> <span class="p">=</span> <span class="mi">2</span>
    <span class="nx">c</span> <span class="p">=</span> <span class="mi">3</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">Sum</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">a</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">b</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">c</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//ä¼ å…¥çš„å‚æ•°ä¸ºæŒ‡é’ˆå˜é‡
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Sum</span><span class="p">(</span><span class="nx">num1</span><span class="p">,</span><span class="nx">num2</span><span class="p">,</span><span class="nx">num3</span> <span class="o">*</span><span class="kt">int</span><span class="p">)</span> <span class="kt">int</span><span class="p">{</span>
  <span class="k">return</span> <span class="o">*</span><span class="nx">num1</span> <span class="o">+</span> <span class="o">*</span><span class="nx">num2</span> <span class="o">+</span> <span class="o">*</span><span class="nx">num3</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="å‡½æ•°å›è°ƒ">ğŸµå‡½æ•°å›è°ƒ</h3>

<p>å‡½æ•°å›è°ƒå°±æ˜¯å‡½æ•°ä½œä¸ºå…¶ä»–å‡½æ•°çš„å‚æ•°ï¼Œåœ¨å…¶ä»–å‡½æ•°å†…è°ƒç”¨æ‰§è¡Œã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">ss</span> <span class="o">:=</span> <span class="s">&#34;golang&#34;</span>
  <span class="nx">ss1</span> <span class="o">:=</span> <span class="s">&#34;world&#34;</span>
  <span class="nf">sayhello</span><span class="p">(</span><span class="nx">ss</span><span class="p">,</span> <span class="nx">ss1</span><span class="p">,</span> <span class="nx">appenStr</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">appenStr</span><span class="p">(</span><span class="nx">prefix</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">suffix</span> <span class="kt">string</span><span class="p">)</span>  <span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">prefix</span><span class="p">,</span> <span class="nx">name</span> <span class="p">,</span> <span class="nx">suffix</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">sayhello</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">suffix</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">f</span> <span class="kd">func</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">f</span> <span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">suffix</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">hello golang world</code></pre></td></tr></table>
</div>
</div>
<h3 id="åŒ¿åå‡½æ•°">ğŸµåŒ¿åå‡½æ•°</h3>

<p><strong>ğŸ“åŒ¿åå‡½æ•°æ˜¯ä¸éœ€è¦å®šä¹‰å‡½æ•°åç§°çš„å‡½æ•°å®ç°æ–¹å¼ï¼Œä¾‹å¦‚ä¸‹é¢è¿™ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span><span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span><span class="p">{</span>
  <span class="k">return</span> <span class="nx">num1</span> <span class="o">+</span> <span class="nx">num2</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><strong>ğŸ“å¯ä»¥å°†åŒ¿åå‡½æ•°å¼•ç”¨ç»™å…¶ä»–å˜é‡ï¼Œä¹Ÿå¯ä»¥æŠŠåŒ¿åå‡½æ•°è®¾ä¸ºå…¶ä»–å‡½æ•°çš„è¿”å›å€¼</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span> <span class="kt">int</span>
    <span class="nx">a</span> <span class="p">=</span> <span class="mi">9</span>
    <span class="nx">b</span> <span class="p">=</span> <span class="mi">2</span>
    <span class="nx">c</span> <span class="p">=</span> <span class="mi">1</span>
    <span class="nx">f</span> <span class="o">:=</span> <span class="nf">Anonymous</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">f</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">Anonymous</span><span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="kt">int</span><span class="p">)</span><span class="p">{</span>
  <span class="nx">r</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">num3</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span><span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">num1</span> <span class="o">+</span> <span class="nx">num2</span> <span class="o">-</span> <span class="nx">num3</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">r</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>ä»¥ä¸Šç¨‹åºå®Œæˆ num1 + num2 - num3 = 9 + 2 -1 = 10</p>

<p><strong>ğŸ“åŒ¿åå‡½æ•°çš„ä¼ å‚</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>

    <span class="nx">ss</span> <span class="o">:=</span> <span class="s">&#34;hello world!&#34;</span>

    <span class="kd">func</span><span class="p">(</span><span class="nx">hello</span> <span class="kt">string</span><span class="p">)</span><span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">hello</span><span class="p">)</span>
    <span class="p">}</span><span class="p">(</span><span class="nx">ss</span><span class="p">)</span>
    <span class="c1">// åé¢çš„æ‹¬å·ä¸­çš„ssä½œä¸ºå‚æ•°ä¼ åˆ°åŒ¿åå‡½æ•°ä¸­
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">hello world!</code></pre></td></tr></table>
</div>
</div>
<h3 id="é—­åŒ…">ğŸµé—­åŒ…</h3>

<p>é—­åŒ…èƒ½å¤Ÿè¯»å–å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>

    <span class="nx">ss</span> <span class="o">:=</span> <span class="s">&#34;world&#34;</span>

    <span class="nf">hello</span><span class="p">(</span><span class="nx">ss</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">hello</span><span class="p">(</span><span class="nx">ss</span> <span class="kt">string</span><span class="p">)</span>  <span class="p">{</span>
  <span class="nx">text</span> <span class="o">:=</span> <span class="s">&#34;hello&#34;</span> <span class="o">+</span> <span class="s">&#34; &#34;</span> <span class="o">+</span> <span class="nx">ss</span>

  <span class="nx">f</span> <span class="o">:=</span> <span class="kd">func</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nf">f</span><span class="p">(</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">hello world</code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/golang/" term="golang" label="golang" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/go%E5%9F%BA%E7%A1%80/" term="goåŸºç¡€" label="goåŸºç¡€" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Golangç³»åˆ—æ•™ç¨‹--æµç¨‹æ§åˆ¶</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/golang-process-control/" />
            <id>https://jjmeg.github.io/posts/golang-process-control/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2019-12-13T14:21:15+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ã€Œæµç¨‹æ§åˆ¶ã€ å¼€å‘äººå‘˜æ§åˆ¶ç¨‹åºæ‰§è¡Œè·¯å¾„çš„æ–¹å¼ï¼Œå¸¸è§çš„æµç¨‹æ§åˆ¶è¯­å¥åŒ…æ‹¬æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ã€è·³â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<p><center>ã€Œæµç¨‹æ§åˆ¶ã€</center>
<p style="text-indent:2em">å¼€å‘äººå‘˜æ§åˆ¶ç¨‹åºæ‰§è¡Œè·¯å¾„çš„æ–¹å¼ï¼Œå¸¸è§çš„æµç¨‹æ§åˆ¶è¯­å¥åŒ…æ‹¬æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ã€è·³è½¬ï¼Œä»¥å®ç°ç¨‹åºçš„æ‰§è¡Œé¡ºåºæ§åˆ¶ã€‚</p></p>

<h1 id="æœ¬æ–‡å†…å®¹">ğŸ“œæœ¬æ–‡å†…å®¹</h1>

<ul>
<li>ğŸ“–<a href="#if/elseåˆ†æ”¯">if/elseåˆ†æ”¯</a></li>
<li>ğŸ“–<a href="#switchåˆ†æ”¯">switchåˆ†æ”¯</a></li>
<li>ğŸ“–<a href="#selectåˆ†æ”¯">selectåˆ†æ”¯</a></li>
<li>ğŸ“–<a href="#forå¾ªç¯">forå¾ªç¯</a></li>
<li>ğŸ“–<a href="#gotoè·³è½¬">gotoè·³è½¬</a></li>
</ul>

<hr />

<h6 id="if-elseåˆ†æ”¯">ğŸµif/elseåˆ†æ”¯</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="k">if</span> <span class="nx">æ¡ä»¶</span> <span class="p">{</span>
  <span class="o">...</span>
  <span class="o">...</span>
<span class="p">}</span><span class="k">else</span><span class="p">{</span>
  <span class="o">...</span>
  <span class="o">...</span>
<span class="p">}</span>

<span class="c1">//æ¡ä»¶å¯å†™åœ¨åŒä¸€è¡Œï¼Œä½†æ˜¯ä¸åŒæ¡ä»¶é—´è¦åŠ ä¸Š;éš”å¼€
</span><span class="c1"></span><span class="k">if</span> <span class="nx">æ¡ä»¶1</span><span class="p">;</span> <span class="nx">æ¡ä»¶2</span> <span class="p">.</span><span class="p">.</span> <span class="p">{</span>
  <span class="o">...</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">personAge</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span>
  	<span class="s">&#34;Amy&#34;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  	<span class="s">&#34;Daming&#34;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  	<span class="s">&#34;Lily&#34;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">personAge</span><span class="p">[</span><span class="s">&#34;Amy&#34;</span><span class="p">]</span><span class="p">;</span> <span class="nx">ok</span> <span class="o">==</span> <span class="kc">true</span><span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Amyâ€™s value is &#34;</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Amy is not here.&#34;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"> Amyâ€™s value is <span class="m">1</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="switchåˆ†æ”¯">ğŸµswitchåˆ†æ”¯</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="k">switch</span> <span class="nx">å˜é‡</span><span class="p">:</span><span class="p">{</span>
  <span class="k">case</span> <span class="nx">æ¡ä»¶1</span><span class="p">:</span>
    <span class="o">...</span>
  <span class="k">case</span> <span class="nx">æ¡ä»¶2</span><span class="p">:</span>
    <span class="o">...</span>
  <span class="k">case</span> <span class="nx">æ¡ä»¶3</span><span class="p">:</span>
    <span class="o">...</span>
  <span class="k">case</span> <span class="nx">æ¡ä»¶4</span><span class="p">:</span>
    <span class="o">...</span>
  <span class="k">case</span> <span class="nx">æ¡ä»¶5</span><span class="p">,</span> <span class="nx">æ¡ä»¶6</span><span class="p">,</span> <span class="nx">æ¡ä»¶7</span><span class="p">,</span> <span class="nx">æ¡ä»¶8</span><span class="p">:</span><span class="c1">//å¤šä¸ªæ¡ä»¶é€‰é¡¹å¹¶åˆ—ç”¨,éš”å¼€
</span><span class="c1"></span>    <span class="o">...</span>
  <span class="k">default</span><span class="p">:</span><span class="c1">//ä¸Šè¿°æ¡ä»¶ä¸æ»¡è¶³æ—¶è¿›å…¥æ­¤é€»è¾‘
</span><span class="c1"></span>    <span class="o">...</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">number</span> <span class="o">:=</span> <span class="mi">3</span>
  <span class="k">switch</span> <span class="nx">number</span><span class="p">{</span>
  <span class="k">case</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;numberæ˜¯åŸºç¡€ç±»&#34;</span><span class="p">)</span>
    <span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;numberæ˜¯ç‰¹åˆ«ç±»&#34;</span><span class="p">)</span>
    <span class="k">default</span><span class="p">:</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;numberä¸ºå…¶ä»–ç±»&#34;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><strong>æ³¨æ„:</strong></p>

<ul>
<li>ä¸å…¶ä»–è¯­è¨€ä¸åŒï¼ŒGoä¸­çš„switchï¼Œåœ¨æ‰§è¡Œå®Œä¸€ä¸ªcaseåé»˜è®¤é€€å‡ºswitchï¼Œä¸ä¼šå†åšå…¶ä»–çš„caseåˆ¤æ–­</li>

<li><p>fallthroughï¼šç”¨äºç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcase</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>

<span class="k">switch</span> <span class="nx">number</span> <span class="o">:=</span> <span class="mi">6</span> <span class="p">;</span><span class="p">{</span>
  <span class="k">case</span> <span class="nx">number</span> <span class="p">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;numberå¤§äº0&#34;</span><span class="p">)</span>
      <span class="k">fallthrough</span>
  <span class="k">case</span> <span class="nx">number</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">:</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;numberå°äº10&#34;</span><span class="p">)</span>
      <span class="k">fallthrough</span>
  <span class="k">case</span> <span class="nx">number</span> <span class="p">&gt;</span> <span class="mi">5</span><span class="p">:</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;numberå¤§äº5&#34;</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">numberå¤§äº0
numberå°äº10
numberå¤§äº5</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<h6 id="selectåˆ†æ”¯">ğŸµselectåˆ†æ”¯</h6>

<p>selectç›‘å¬IOæ“ä½œï¼Œå¸¸ç”¨äºç›‘å¬channelï¼Œå¯é˜…è¯» <a href="/posts/golang-channel.md">Golangç³»åˆ—æ•™ç¨‹--Channel</a></p>

<h6 id="forå¾ªç¯">ğŸµforå¾ªç¯</h6>

<p>Goè¯­è¨€ä¸­æ²¡æœ‰whileè¯­å¥ï¼Œç”¨foræ¥æè¿°å¾ªç¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">for åˆå§‹å€¼ ; æ»¡è¶³èŒƒå›´; æ“ä½œ{
  ...
}</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="nx">k</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">k</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;k is :%d\n&#34;</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">// å¤šä¸ªå˜é‡æ§åˆ¶ï¼Œç”¨,éš”å¼€
</span><span class="c1"></span>    <span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="o">:=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">j</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="p">=</span> <span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">j</span><span class="o">+</span><span class="mi">1</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d * %d = %d\n&#34;</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="o">*</span><span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">k is :1
k is :2
k is :3
k is :4
k is :5
k is :6
k is :7
k is :8
k is :9
k is :10

<span class="c1"># å¤šä¸ªå˜é‡æ§åˆ¶è¾“å‡ºç»“æœ</span>
<span class="m">1</span> * <span class="nv">10</span> <span class="o">=</span> <span class="m">10</span>
<span class="m">2</span> * <span class="nv">9</span> <span class="o">=</span> <span class="m">18</span>
<span class="m">3</span> * <span class="nv">8</span> <span class="o">=</span> <span class="m">24</span>
<span class="m">4</span> * <span class="nv">7</span> <span class="o">=</span> <span class="m">28</span>
<span class="m">5</span> * <span class="nv">6</span> <span class="o">=</span> <span class="m">30</span>
<span class="m">6</span> * <span class="nv">5</span> <span class="o">=</span> <span class="m">30</span>
<span class="m">7</span> * <span class="nv">4</span> <span class="o">=</span> <span class="m">28</span>
<span class="m">8</span> * <span class="nv">3</span> <span class="o">=</span> <span class="m">24</span>
<span class="m">9</span> * <span class="nv">2</span> <span class="o">=</span> <span class="m">18</span>
<span class="m">10</span> * <span class="nv">1</span> <span class="o">=</span> <span class="m">10</span></code></pre></td></tr></table>
</div>
</div>
<p><strong>æ”¯æŒcontinueå’Œbreak</strong></p>

<p>breakç”¨äºç»ˆæ­¢å½“å‰æ‰€åœ¨çš„forå¾ªç¯ï¼Œcontinueè¡¨æ˜æœ¬æ¬¡å¾ªç¯ä¸­ä¸æ‰§è¡Œcontinueåç»­çš„è¯­å¥ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// continueå®Œæˆäº†åªè¾“å‡ºk&gt;5çš„å–å€¼
</span><span class="c1"></span>    <span class="k">for</span> <span class="nx">k</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">k</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">{</span>
        <span class="k">if</span> <span class="nx">k</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">{</span>
            <span class="k">continue</span>
        <span class="p">}</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;k is :%d\n&#34;</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span>
    <span class="p">}</span>


    <span class="c1">// breakè®©i=10æ—¶é€€å‡ºforå¾ªç¯
</span><span class="c1"></span>    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">;</span> <span class="nx">i</span> <span class="p">=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">1</span> <span class="p">{</span>
        <span class="k">if</span> <span class="nx">i</span> <span class="o">==</span> <span class="mi">10</span><span class="p">{</span>
            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34; is :%d\n&#34;</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span>
            <span class="k">break</span>
        <span class="p">}</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;i is :%d\n&#34;</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>

<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">æœ¬ä¾‹ä¸­continueçš„æ•ˆæœ
k is :6
k is :7
k is :8
k is :9
k is :10

æœ¬ä¾‹ä¸­breakçš„æ•ˆæœ
i is :1
i is :2
i is :3
i is :4
i is :5
i is :6
i is :7
i is :8
i is :9
i is :10</code></pre></td></tr></table>
</div>
</div>
<h6 id="gotoè·³è½¬">ğŸµgotoè·³è½¬</h6>

<p>gotoä½¿å¾—ç¨‹åºç›´æ¥åˆ°æŒ‡å®šè¡Œæ‰§è¡Œï¼Œä¸è¿‡ä¸å»ºè®®å¸¸ç”¨ï¼Œgotoå®¹æ˜“é€ æˆç¨‹åºæµç¨‹æ··ä¹±</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">10</span> <span class="p">;</span> <span class="nx">i</span> <span class="p">=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">1</span> <span class="p">{</span>
      <span class="k">if</span> <span class="nx">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
          <span class="k">goto</span> <span class="nx">Find</span>
      <span class="p">}</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;i is :%d\n&#34;</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>

  <span class="nx">Find</span><span class="p">:</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;å¶æ•°å‡ºç°&#34;</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">i is :1
å¶æ•°å‡ºç°</code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/golang/" term="golang" label="golang" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/go%E5%9F%BA%E7%A1%80/" term="goåŸºç¡€" label="goåŸºç¡€" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Golangç³»åˆ—æ•™ç¨‹--Map</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/golang-map/" />
            <id>https://jjmeg.github.io/posts/golang-map/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2019-12-12T14:14:35+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ã€ŒMapã€ é”®å€¼å¯¹çš„æ— åºé›†åˆï¼Œkeyå”¯ä¸€ï¼Œæ ¹æ®keyå¯å¿«é€ŸæŸ¥æ‰¾æ•°æ®ï¼Œåº•å±‚ç”¨å“ˆå¸Œè¡¨å®ç°ã€‚â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<p><center>ã€ŒMapã€</center>
<p style="text-indent:2em">é”®å€¼å¯¹çš„æ— åºé›†åˆï¼Œkeyå”¯ä¸€ï¼Œæ ¹æ®keyå¯å¿«é€ŸæŸ¥æ‰¾æ•°æ®ï¼Œåº•å±‚ç”¨å“ˆå¸Œè¡¨å®ç°ã€‚</p></p>

<h1 id="æœ¬æ–‡å†…å®¹">ğŸ“œæœ¬æ–‡å†…å®¹</h1>

<ul>
<li>ğŸ“–<a href="#mapçš„åˆå§‹åŒ–">mapçš„åˆå§‹åŒ–</a></li>
<li>ğŸ“–<a href="#mapæ’å…¥å…ƒç´ ">mapæ’å…¥å…ƒç´ </a></li>
<li>ğŸ“–<a href="#mapåˆ é™¤å…ƒç´ ">mapåˆ é™¤å…ƒç´ </a></li>
<li>ğŸ“–<a href="#mapè®¿é—®å…ƒç´ ">mapè®¿é—®å…ƒç´ </a></li>
<li>ğŸ“–<a href="#mapçš„éå†">mapçš„éå†</a></li>
</ul>

<h6 id="mapçš„åˆå§‹åŒ–">ğŸµmapçš„åˆå§‹åŒ–</h6>

<p>ä½¿ç”¨<code>make</code>å…³é”®å­—ï¼Œ<code>make(map[T]T)</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="c1">// åˆ›å»ºä¸€ä¸ªkeyä¸ºstringï¼Œvalueä¸ºintç±»å‹çš„map
</span><span class="c1"></span><span class="nx">map1</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span>
<span class="c1">// å¤åˆmapï¼Œkeyä¸ºstringï¼Œvalueä¸ºä¸€ä¸ªmap
</span><span class="c1"></span><span class="nx">map2</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="mapæ’å…¥å…ƒç´ ">ğŸµmapæ’å…¥å…ƒç´ </h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span>	<span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// å£°æ˜map
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">personAge</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span>
  <span class="c1">// åˆå§‹åŒ–map
</span><span class="c1"></span>	<span class="nx">personAge</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span>

  <span class="c1">// æ’å…¥æ•°æ®
</span><span class="c1"></span>	<span class="nx">personAge</span><span class="p">[</span><span class="s">&#34;Amy&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mi">1</span>
	<span class="nx">personAge</span><span class="p">[</span><span class="s">&#34;Daming&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mi">2</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Create a map&#34;</span><span class="p">:</span> <span class="nx">personAge</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">Create a map : map<span class="o">[</span>Daming:2 Amy:1<span class="o">]</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="mapåˆ é™¤å…ƒç´ ">ğŸµmapåˆ é™¤å…ƒç´ </h6>

<p>ä½¿ç”¨å†…ç½®å‡½æ•°<code>delete(map,key)</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// å£°æ˜map
</span><span class="c1"></span>  <span class="kd">var</span> <span class="nx">personAge</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span>
  <span class="c1">// åˆå§‹åŒ–map
</span><span class="c1"></span>  <span class="nx">personAge</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span>

  <span class="c1">// æ’å…¥æ•°æ®
</span><span class="c1"></span>	<span class="nx">personAge</span><span class="p">[</span><span class="s">&#34;Amy&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mi">1</span>
	<span class="nx">personAge</span><span class="p">[</span><span class="s">&#34;Daming&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mi">2</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Create a map :&#34;</span><span class="p">,</span><span class="nx">personAge</span><span class="p">)</span>

  <span class="c1">// åˆ é™¤ä¸€ä¸ªæ•°æ®
</span><span class="c1"></span>	<span class="nb">delete</span><span class="p">(</span><span class="nx">personAge</span><span class="p">,</span> <span class="s">&#34;Amy&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;delete Amy :&#34;</span><span class="p">,</span><span class="nx">personAge</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">Create a map : map<span class="o">[</span>Daming:2 amy:1<span class="o">]</span>
Delete Amy : map<span class="o">[</span>Daming:2<span class="o">]</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="mapè®¿é—®å…ƒç´ ">ğŸµmapè®¿é—®å…ƒç´ </h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">personAge</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span>
  	<span class="s">&#34;Amy&#34;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  	<span class="s">&#34;Daming&#34;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  	<span class="s">&#34;Lily&#34;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="c1">// 1. é€šè¿‡keyçš„å†…å®¹ç›´æ¥è·å–ï¼šä¸å­˜åœ¨åˆ™è¿”å›å€¼ç±»å‹çš„0å€¼ï¼Œä¾‹å¦‚map[string]stringï¼Œä¸å­˜åœ¨çš„è¿”å›&#34;&#34;
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get Jimmy :&#34;</span><span class="p">,</span><span class="nx">personAge</span><span class="p">[</span><span class="s">&#34;Jimmy&#34;</span><span class="p">]</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get Amy :&#34;</span><span class="p">,</span><span class="nx">personAge</span><span class="p">[</span><span class="s">&#34;Amy&#34;</span><span class="p">]</span><span class="p">)</span>

  <span class="c1">// 2. personAge[&#34;Jimmy&#34;]è¿”å›ä¸¤ä¸ªå‚æ•°
</span><span class="c1"></span>  <span class="nx">value</span> <span class="p">,</span><span class="nx">ok</span> <span class="o">:=</span> <span class="nx">personAge</span><span class="p">[</span><span class="s">&#34;Jimmy&#34;</span><span class="p">]</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Jimmy exists ? &#34;</span><span class="p">,</span><span class="nx">ok</span><span class="p">)</span>

  <span class="nx">value</span> <span class="p">,</span><span class="nx">ok</span> <span class="p">=</span> <span class="nx">personAge</span><span class="p">[</span><span class="s">&#34;Amy&#34;</span><span class="p">]</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Amy exists ? %v the value is : %d&#34;</span><span class="p">,</span> <span class="nx">ok</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><strong>åœ¨è®¿é—®å…ƒç´ æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è®¿é—®çš„å…ƒç´ çš„å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™æ˜¯trueï¼Œä¸å­˜åœ¨ä¸ºfalseï¼Œæ­¤å¤–ï¼Œä¸å­˜åœ¨çš„å…ƒç´ çš„è¿”å›å€¼æ˜¯å…ƒç´ å–å€¼çš„é»˜è®¤0å€¼ã€‚</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">Get Jimmy : <span class="m">0</span>
Get Amy : <span class="m">1</span>
Jimmy exists ?  <span class="nb">false</span>
Amy exists ? <span class="nb">true</span> the value is :1</code></pre></td></tr></table>
</div>
</div>
<h6 id="mapçš„éå†">ğŸµmapçš„éå†</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">personAge</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span>
  	<span class="s">&#34;Amy&#34;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  	<span class="s">&#34;Daming&#34;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  	<span class="s">&#34;Lily&#34;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">personAge</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;key: %s, value: %d\n&#34;</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">key: Amy, value: <span class="m">1</span>
key: Daming, value: <span class="m">2</span>
key: Lily, value: <span class="m">3</span></code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/golang/" term="golang" label="golang" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/go%E5%9F%BA%E7%A1%80/" term="goåŸºç¡€" label="goåŸºç¡€" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Golangç³»åˆ—æ•™ç¨‹--æ•°ç»„å’Œåˆ‡ç‰‡</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/golang-array-and-slice/" />
            <id>https://jjmeg.github.io/posts/golang-array-and-slice/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2019-12-12T11:30:21+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ğŸ“œæœ¬æ–‡å†…å®¹ ğŸ“šæ•°ç»„ ğŸ“–å£°æ˜æ–¹å¼ ğŸ“–éå†æ–¹å¼ ğŸ“šåˆ‡ç‰‡ ğŸ“–ä¸€ä¸ªåˆ‡ç‰‡ä¾‹å­ ğŸ“–å®¹é‡å’Œé•¿åº¦ ğŸ“–åˆ‡ç‰‡çš„åˆ›å»º ğŸ“šæ•°â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<h1 id="æœ¬æ–‡å†…å®¹">ğŸ“œæœ¬æ–‡å†…å®¹</h1>

<ul>
<li><p>ğŸ“š<a href="#æ•°ç»„">æ•°ç»„</a></p>

<ul>
<li>ğŸ“–<a href="#å£°æ˜æ–¹å¼">å£°æ˜æ–¹å¼</a></li>
<li>ğŸ“–<a href="#éå†æ–¹å¼">éå†æ–¹å¼</a></li>
</ul></li>

<li><p>ğŸ“š<a href="#åˆ‡ç‰‡">åˆ‡ç‰‡</a></p>

<ul>
<li>ğŸ“–<a href="#ä¸€ä¸ªåˆ‡ç‰‡ä¾‹å­">ä¸€ä¸ªåˆ‡ç‰‡ä¾‹å­</a></li>
<li>ğŸ“–<a href="#å®¹é‡å’Œé•¿åº¦">å®¹é‡å’Œé•¿åº¦</a></li>
<li>ğŸ“–<a href="#åˆ‡ç‰‡çš„åˆ›å»º">åˆ‡ç‰‡çš„åˆ›å»º</a></li>
</ul></li>

<li><p>ğŸ“š<a href="#æ•°ç»„å’Œåˆ‡ç‰‡åŒºåˆ«">æ•°ç»„å’Œåˆ‡ç‰‡åŒºåˆ«</a></p></li>
</ul>

<h3 id="æ•°ç»„">ğŸµæ•°ç»„</h3>

<ul>
<li>ç›¸åŒå…ƒç´ çš„å›ºå®šå®¹é‡çš„é›†åˆï¼Œä¸€æ—¦è¢«å£°æ˜ï¼Œå®¹é‡å›ºå®šï¼Œè‹¥æ’å…¥æ–°æ•°æ®è¶…å‡ºæ•°ç»„èŒƒå›´å°†æŠ¥é”™è¯¯</li>
<li>æ•°ç»„æ˜¯å€¼ç±»å‹</li>
</ul>

<h6 id="å£°æ˜æ–¹å¼">ğŸ’å£°æ˜æ–¹å¼</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go">  <span class="kn">package</span> <span class="nx">main</span>

  <span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

  <span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
    <span class="c1">//1
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">num1</span> <span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="kt">int</span>

    <span class="c1">//2
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">num2</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="kt">int</span>
    <span class="nx">num2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="mi">1</span>
    <span class="nx">num2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="mi">2</span>
    <span class="nx">num2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">=</span> <span class="mi">3</span>

    <span class="c1">//2
</span><span class="c1"></span>    <span class="nx">num3</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>

  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\n%v\n%v\n&#34;</span><span class="p">,</span><span class="nx">num1</span><span class="p">,</span><span class="nx">num2</span><span class="p">,</span><span class="nx">num3</span><span class="p">)</span>
  <span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">  <span class="o">[</span><span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> 0<span class="o">]</span>
  <span class="o">[</span><span class="m">1</span> <span class="m">2</span> 3<span class="o">]</span>
  <span class="o">[</span><span class="m">1</span> <span class="m">2</span> 3<span class="o">]</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="éå†æ–¹å¼">ğŸ’éå†æ–¹å¼</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go">  <span class="kn">package</span> <span class="nx">main</span>

  <span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

  <span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
    <span class="kd">var</span> <span class="nx">nums</span> <span class="p">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">}</span>

    <span class="c1">//å†…ç½®å‡½æ•°lenå–é•¿åº¦ï¼Œé€šè¿‡æ•°ç»„ç´¢å¼•åšéå†
</span><span class="c1"></span>    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="p">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="nx">nums</span><span class="p">)</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d\n&#34;</span><span class="p">,</span><span class="nx">nums</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">//ä½¿ç”¨rangeéå†ï¼Œiä¸ºä¸‹æ ‡ï¼Œvä¸ºè¯¥ä¸‹æ ‡å­˜å‚¨çš„æ•°å€¼
</span><span class="c1"></span>    <span class="k">for</span> <span class="nx">i</span><span class="p">,</span><span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">nums</span><span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Index:%d\tvalue:%d\n&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">v</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">  lenæ–¹å¼éå†ç»“æœï¼š
    <span class="m">1</span>
    <span class="m">2</span>
    <span class="m">3</span>
    <span class="m">4</span>
    <span class="m">5</span>
    <span class="m">6</span>
    <span class="m">7</span>
    <span class="m">8</span>
  rangeæ–¹å¼éå†ç»“æœï¼š
    Index:0	value:1
    Index:1	value:2
    Index:2	value:3
    Index:3	value:4
    Index:4	value:5
    Index:5	value:6
    Index:6	value:7
    Index:7	value:8</code></pre></td></tr></table>
</div>
</div>
<hr />

<h3 id="åˆ‡ç‰‡">ğŸµåˆ‡ç‰‡</h3>

<ul>
<li>æ˜¯æ•°ç»„çš„éƒ¨åˆ†ï¼Œå¼•ç”¨æ•°ç»„çš„ä¸€æ®µå†…å®¹ï¼Œå®é™…ä¸å­˜å‚¨ä»»ä½•å€¼</li>

<li><p>å¯¹åˆ‡ç‰‡çš„ä¿®æ”¹å³æ˜¯å¯¹å¼•ç”¨çš„æ•°ç»„çš„ä¿®æ”¹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="nx">nums</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">}</span>
<span class="kd">var</span> <span class="nx">s</span> <span class="p">[</span><span class="p">]</span><span class="kt">int</span> <span class="p">=</span> <span class="nx">nums</span><span class="p">[</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<h6 id="ä¸€ä¸ªåˆ‡ç‰‡ä¾‹å­">ğŸ’ä¸€ä¸ªåˆ‡ç‰‡ä¾‹å­</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// æ–°å»ºäº†ä¸€ä¸ªintæ•°ç»„ï¼Œå°†æ•°ç»„çš„å¼•ç”¨åˆ†é…ç»™ä¸€ä¸ªåˆ‡ç‰‡
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">array</span> <span class="p">=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">}</span>
  <span class="kd">var</span> <span class="nx">nums</span> <span class="p">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;length of nums is:%d, the capacity is %d\n &#34;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">nums</span><span class="p">)</span><span class="p">,</span> <span class="nb">cap</span><span class="p">(</span><span class="nx">nums</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">length of nums is:2, the capacity is <span class="m">5</span></code></pre></td></tr></table>
</div>
</div>
<h6 id="å®¹é‡å’Œé•¿åº¦">ğŸ’å®¹é‡å’Œé•¿åº¦</h6>

<ul>
<li>é•¿åº¦ï¼šè¡¨ç¤ºå½“å‰åˆ‡ç‰‡åŒ…å«çš„å…ƒç´ ä¸ªæ•°</li>
<li>å®¹é‡ï¼šè¡¨ç¤ºåˆ‡ç‰‡å¯åŒ…å«çš„æœ€å¤šå…ƒç´ ä¸ªæ•°</li>
<li>ä¸Šè¿°ä¾‹å­ä¸­ï¼ŒnumsæŒ‡å‘arrayæ•°ç»„ä»ç¬¬3åˆ°ç¬¬5çš„éƒ¨åˆ†ï¼Œé‚£ä¹ˆå½“å‰numså…ƒç´ ä¸ªæ•°ä¸º2ï¼Œnumsæ˜¯ä»ç¬¬3ä¸ªå¼€å§‹çš„ï¼Œæœ€å¤šå¯ä»¥åˆ°ç¬¬8ä¸ªï¼Œé‚£ä¹ˆåˆ‡ç‰‡çš„å®¹é‡æœ€å¤šä¸º5</li>
</ul>

<h6 id="åˆ‡ç‰‡çš„åˆ›å»º">ğŸ’åˆ‡ç‰‡çš„åˆ›å»º</h6>

<ul>
<li>æ–°å»ºæ•°ç»„ï¼ŒæŒ‡å‘æ•°ç»„çš„éƒ¨åˆ†ï¼Œå¦‚ä¸Šè¿°ä¾‹å­ä¸­</li>

<li><p>makeï¼š<code>make([]T, len, cap)</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="nx">i</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="kt">int</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<hr />

<h3 id="æ•°ç»„å’Œåˆ‡ç‰‡åŒºåˆ«">ğŸµæ•°ç»„å’Œåˆ‡ç‰‡åŒºåˆ«</h3>

<table>
<thead>
<tr>
<th align="center">æ•°ç»„</th>
<th align="center">åˆ‡ç‰‡</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">å€¼ç±»å‹</td>
<td align="center">å¼•ç”¨ç±»å‹</td>
</tr>

<tr>
<td align="center">å­˜å‚¨æ•°æ®</td>
<td align="center">ä¸å­˜å‚¨æ•°æ®</td>
</tr>

<tr>
<td align="center">é•¿åº¦ä¸å¯å˜</td>
<td align="center">é•¿åº¦å¯å˜ï¼Œä½†æœ‰æœ€å¤§å®¹é‡</td>
</tr>
</tbody>
</table>
]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/golang/" term="golang" label="golang" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/go%E5%9F%BA%E7%A1%80/" term="goåŸºç¡€" label="goåŸºç¡€" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Golangç³»åˆ—æ•™ç¨‹--åŸºç¡€ç»“æ„ä¸ç±»å‹</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/golang-basic-struct-and-types/" />
            <id>https://jjmeg.github.io/posts/golang-basic-struct-and-types/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2019-12-11T18:00:47+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ğŸ“œæœ¬æ–‡å†…å®¹ ğŸ“šåŸºç¡€ç±»å‹ ğŸ“–å¸ƒå°”å‹ ğŸ“–æ•°å€¼ç±»å‹ ğŸ“–å­—ç¬¦ä¸² ğŸ“–åŸºç¡€ç±»å‹é»˜è®¤å–å€¼ ğŸ“–é”™è¯¯ç±»å‹ ğŸ“šå˜é‡ ğŸ“–æŒ‡â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<h1 id="æœ¬æ–‡å†…å®¹">ğŸ“œæœ¬æ–‡å†…å®¹</h1>

<ul>
<li>ğŸ“š<a href="#åŸºç¡€ç±»å‹">åŸºç¡€ç±»å‹</a>

<ul>
<li>ğŸ“–<a href="#å¸ƒå°”å‹">å¸ƒå°”å‹</a></li>
<li>ğŸ“–<a href="#æ•°å€¼ç±»å‹">æ•°å€¼ç±»å‹</a></li>
<li>ğŸ“–<a href="#å­—ç¬¦ä¸²">å­—ç¬¦ä¸²</a></li>
<li>ğŸ“–<a href="#åŸºç¡€ç±»å‹é»˜è®¤å–å€¼">åŸºç¡€ç±»å‹é»˜è®¤å–å€¼</a></li>
<li>ğŸ“–<a href="#é”™è¯¯ç±»å‹">é”™è¯¯ç±»å‹</a></li>
</ul></li>
<li>ğŸ“š<a href="#å˜é‡">å˜é‡</a>

<ul>
<li>ğŸ“–<a href="#æŒ‡é’ˆå˜é‡">æŒ‡é’ˆå˜é‡</a></li>
<li>ğŸ“–<a href="#æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆ">æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆ</a></li>
<li>ğŸ“–<a href="#å˜é‡å‘½å">å˜é‡å‘½å</a></li>
<li>ğŸ“–<a href="#å˜é‡å£°æ˜ç¨‹åºä¾‹å­">å˜é‡å£°æ˜ç¨‹åºä¾‹å­</a></li>
<li>ğŸ“–<a href="#å˜é‡ç”Ÿå‘½å‘¨æœŸ">å˜é‡ç”Ÿå‘½å‘¨æœŸ</a></li>
<li>ğŸ“–<a href="#å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹">å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹</a></li>
</ul></li>
<li>ğŸ“š<a href="#å¸¸é‡">å¸¸é‡</a>

<ul>
<li>ğŸ“–<a href="#å¸¸é‡å®šä¹‰">å¸¸é‡å®šä¹‰</a></li>
<li>ğŸ“–<a href="#å¸¸é‡æ¨¡æ‹Ÿæšä¸¾">å¸¸é‡æ¨¡æ‹Ÿæšä¸¾</a></li>
</ul></li>
</ul>

<hr />

<h1 id="åŸºç¡€ç±»å‹">ğŸµåŸºç¡€ç±»å‹</h1>

<h3 id="å¸ƒå°”å‹">å¸ƒå°”å‹</h3>

<table>
<thead>
<tr>
<th align="center">ç±»å‹</th>
<th align="center">å†…å­˜å ç”¨å¤§å°</th>
<th align="center">å–å€¼èŒƒå›´</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">bool</td>
<td align="center">1å­—èŠ‚</td>
<td align="center">trueå’Œfalse</td>
</tr>
</tbody>
</table>

<h3 id="æ•°å€¼ç±»å‹">æ•°å€¼ç±»å‹</h3>

<h6 id="1-æ— ç¬¦å·æ•´å‹">ğŸ’1.æ— ç¬¦å·æ•´å‹</h6>

<table>
<thead>
<tr>
<th align="center">ç±»å‹</th>
<th align="center">å†…å­˜å ç”¨å¤§å°</th>
<th align="center">å–å€¼èŒƒå›´</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">uint8åˆç§°byte</td>
<td align="center">1å­—èŠ‚</td>
<td align="center">0~255</td>
</tr>

<tr>
<td align="center">uint16</td>
<td align="center">2å­—èŠ‚</td>
<td align="center">0~65535</td>
</tr>

<tr>
<td align="center">uint32</td>
<td align="center">4å­—èŠ‚</td>
<td align="center">0~4294967295</td>
</tr>

<tr>
<td align="center">uint64</td>
<td align="center">8å­—èŠ‚</td>
<td align="center">0~18446744073709551615</td>
</tr>
</tbody>
</table>

<h6 id="2-æœ‰ç¬¦å·æ•´å‹">ğŸ’2.æœ‰ç¬¦å·æ•´å‹</h6>

<table>
<thead>
<tr>
<th align="center">ç±»å‹</th>
<th align="center">å†…å­˜å ç”¨å¤§å°</th>
<th align="center">å–å€¼èŒƒå›´</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">int8</td>
<td align="center">1å­—èŠ‚</td>
<td align="center">-128~127</td>
</tr>

<tr>
<td align="center">int16</td>
<td align="center">2å­—èŠ‚</td>
<td align="center">-32768~32767</td>
</tr>

<tr>
<td align="center">int32</td>
<td align="center">4å­—èŠ‚</td>
<td align="center">-2147483648~2147483647</td>
</tr>

<tr>
<td align="center">int64</td>
<td align="center">8å­—èŠ‚</td>
<td align="center">-9223372036854775808~9223372036854775807</td>
</tr>
</tbody>
</table>

<p><strong>æ³¨ï¼šGolangä¸­çš„intåœ¨æœªæ˜ç¡®æŒ‡å®šä½æ•°æ—¶ï¼Œé»˜è®¤ä¸ºint32</strong></p>

<h6 id="3-æµ®ç‚¹å‹">ğŸ’3.æµ®ç‚¹å‹</h6>

<table>
<thead>
<tr>
<th align="center">ç±»å‹</th>
<th align="center">å†…å­˜å ç”¨å¤§å°</th>
<th align="center">å–å€¼èŒƒå›´</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">float32</td>
<td align="center">4å­—èŠ‚</td>
<td align="center">1.4e-45~3.4e38</td>
</tr>

<tr>
<td align="center">float64</td>
<td align="center">8å­—èŠ‚</td>
<td align="center">4.9e-324~1.8e308</td>
</tr>
</tbody>
</table>

<h3 id="å­—ç¬¦ä¸²">å­—ç¬¦ä¸²</h3>

<p>Goä¸­çš„å­—ç¬¦ä¸²ç”±å­—èŠ‚ç»„æˆï¼Œä¸å¯å˜ç±»å‹ï¼Œä½¿ç”¨UTF-8ç¼–ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="nx">name</span> <span class="p">=</span> <span class="s">&#34;hello&#34;</span></code></pre></td></tr></table>
</div>
</div>
<p>å¸¸ç”¨å¤„ç†å­—ç¬¦ä¸²çš„åŒ…
- strconvï¼šæä¾›äº†å¤šç§æ•°å€¼ä¸å­—ç¬¦ä¸²è½¬åŒ–çš„å‡½æ•°
- stringsï¼šæä¾›å¤šç§å­—ç¬¦ä¸²å¤„ç†çš„æ–¹æ³•</p>

<h3 id="åŸºç¡€ç±»å‹é»˜è®¤å–å€¼">åŸºç¡€ç±»å‹é»˜è®¤å–å€¼</h3>

<table>
<thead>
<tr>
<th align="center">å¸ƒå°”å‹</th>
<th align="center">æ•°å€¼ç±»å‹</th>
<th align="center">å­—ç¬¦ä¸²</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">false</td>
<td align="center">0</td>
<td align="center">&quot;&quot;</td>
</tr>
</tbody>
</table>

<h3 id="é”™è¯¯ç±»å‹">é”™è¯¯ç±»å‹</h3>

<ul>
<li><p>Goå†…ç½®çš„æ¥å£ï¼ŒGoä¸­çš„errorsåŒ…å®ç°äº†Error()å‡½æ•°ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å®ç°é”™è¯¯ç±»å‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">type</span> <span class="kt">error</span> <span class="kd">interface</span> <span class="p">{</span>
<span class="nf">Error</span><span class="p">(</span><span class="p">)</span> <span class="kt">string</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">TestError</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Msg</span> <span class="kt">string</span>
<span class="p">}</span>

<span class="c1">// å®ç°äº†Erroræ¥å£
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">e</span> <span class="nx">TestError</span><span class="p">)</span> <span class="nf">Error</span><span class="p">(</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;%v&#34;</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">Msg</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<hr />

<h1 id="å˜é‡">ğŸµå˜é‡</h1>

<ul>
<li>å£°æ˜å½¢å¼ï¼š

<ul>
<li><code>var [å˜é‡å] [å˜é‡ç±»å‹]</code>: <code>var name string</code></li>
<li><code>new</code>: <code>b := new(bool)</code>  <code>new</code>ä¼šåˆ†é…è¢«ç½®é›¶çš„å­˜å‚¨ï¼Œåœ¨æ­¤<code>b</code>çš„å€¼ä¸º<code>false</code></li>
<li><code>make</code>: <code>make(chan bool)</code> æ–°å»º<code>map</code>ã€<code>slice</code>ã€<code>channel</code>ç±»å‹çš„æ•°æ®</li>
</ul></li>
<li>æ³¨æ„ï¼š

<ul>
<li>å…³é”®å­—ä¸èƒ½ä½œä¸ºå˜é‡åï¼Œä¾‹å¦‚const/var/importç­‰</li>
<li>é¦–å­—æ¯å¤§å†™åˆ™è¯¥å˜é‡å¯å¯¼å‡º</li>
<li>å‡½æ•°å†…å£°æ˜çš„ä¸ºå±€éƒ¨å˜é‡ï¼Œå…¨å±€å˜é‡åˆ™åœ¨importè¯­å¥åä½œå£°æ˜</li>
</ul></li>
<li>åˆå§‹åŒ–ï¼š

<ul>
<li>æœªæ‰‹åŠ¨èµ‹å€¼ï¼Œå˜é‡è¢«åˆå§‹åŒ–æˆé»˜è®¤å€¼ï¼Œ<code>int:0</code>ï¼Œ<code>string:&quot;&quot;</code>ï¼Œ<code>bool:false</code></li>
</ul></li>
</ul>

<h3 id="æŒ‡é’ˆå˜é‡">æŒ‡é’ˆå˜é‡</h3>

<h6 id="1-å’Œ-çš„åŒºåˆ«">ğŸ’1.* å’Œ &amp; çš„åŒºåˆ«</h6>

<table>
<thead>
<tr>
<th align="center">&amp;</th>
<th align="center">*</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">å–åœ°å€ç¬¦å·</td>
<td align="center">æŒ‡é’ˆè¿ç®—ç¬¦</td>
</tr>

<tr>
<td align="center">å¯¹å˜é‡å–åœ°å€</td>
<td align="center">ä¸€ä¸ªå˜é‡æ˜¯æŒ‡é’ˆç±»å‹<br/>æŒ‡é’ˆå˜é‡æ‰€å¤„çš„å­˜å‚¨å•å…ƒ<br/></td>
</tr>

<tr>
<td align="center">a = *&amp;a</td>
<td align="center">a = <em>&amp;</em>&amp;<em>&amp;</em>&amp;*&amp;a</td>
</tr>
</tbody>
</table>

<p><strong>*&amp;å¯ä»¥ç›¸äº’æŠµæ¶ˆï¼Œ&amp;*ä¸å¯ä»¥æŠµæ¶ˆ</strong></p>

<h3 id="æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆ">æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">i</span> <span class="p">=</span> <span class="mi">1</span>
<span class="kd">var</span> <span class="nx">ptr</span> <span class="o">*</span><span class="kt">int</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">i</span>
<span class="kd">var</span> <span class="nx">pptr</span> <span class="o">*</span><span class="o">*</span><span class="kt">int</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">ptr</span></code></pre></td></tr></table>
</div>
</div>
<table>
<thead>
<tr>
<th align="center">ptr</th>
<th align="center">pptr</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">ptræ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡</br>ptrçš„ç±»å‹æ˜¯*int</td>
<td align="center">pptræ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡</br>pptrçš„ç±»å‹æ˜¯**intï¼Œä¹Ÿæ˜¯&amp;ptr</td>
</tr>

<tr>
<td align="center">*ptr = 1</td>
<td align="center">**pptr = 1</td>
</tr>
</tbody>
</table>

<h3 id="å˜é‡å‘½å">å˜é‡å‘½å</h3>

<p>æ¨èé˜…è¯»ï¼šé©¼å³°å‘½åæ³•</p>

<h3 id="å˜é‡å£°æ˜ç¨‹åºä¾‹å­">å˜é‡å£°æ˜ç¨‹åºä¾‹å­</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">qq</span> <span class="kt">int</span>
<span class="kd">type</span> <span class="nx">pp</span> <span class="kt">float32</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
 <span class="c1">// ç”¨varå£°æ˜å˜é‡ï¼Œç”¨ = èµ‹å€¼ï¼ŒGoä¼šè‡ªåŠ¨æ£€æµ‹å˜é‡çš„ç±»å‹
</span><span class="c1"></span> <span class="kd">var</span> <span class="nx">name</span> <span class="p">=</span> <span class="s">&#34;haha&#34;</span>
 <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>

 <span class="c1">// çœç•¥varå…³é”®å­—ï¼Œç”¨ := åˆå§‹åŒ–ï¼ŒGoä¼šè‡ªåŠ¨æ£€æµ‹å˜é‡çš„ç±»å‹
</span><span class="c1"></span> <span class="nx">name1</span> <span class="o">:=</span> <span class="s">&#34;hahaha&#34;</span>
 <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">name1</span><span class="p">)</span>

 <span class="kd">var</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
 <span class="kd">var</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">d</span> <span class="p">=</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#34;ha&#34;</span>
 <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span>

 <span class="c1">//é»˜è®¤åˆå§‹åŒ–ä¸º0
</span><span class="c1"></span> <span class="kd">var</span> <span class="nx">a1</span> <span class="nx">qq</span>
 <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a1</span><span class="p">)</span>
 <span class="kd">var</span> <span class="nx">s1</span> <span class="nx">pp</span>
 <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">haha
hahaha
<span class="m">1</span> <span class="m">2</span> <span class="m">3</span> ha
<span class="m">0</span>
<span class="m">0</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="å˜é‡ç”Ÿå‘½å‘¨æœŸ">å˜é‡ç”Ÿå‘½å‘¨æœŸ</h3>

<ul>
<li>åŒ…çº§åˆ«å˜é‡ï¼šæ•´ä¸ªç¨‹åºæ‰§è¡Œè¿‡ç¨‹</li>
<li>å±€éƒ¨å˜é‡ï¼šæ¯æ¬¡æ‰§è¡Œå£°æ˜æ—¶å»ºç«‹ä¸€ä¸ªå®ä½“ï¼Œä¸€ç›´ç”Ÿå­˜åˆ°å®ƒä¸å¯è®¿é—®ï¼Œå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œä¸å¯è®¿é—®åï¼Œå…¶å®ä½“æ‰€å çš„å†…å­˜ç©ºé—´å°†è¢«æ”¶å›</li>
</ul>

<h3 id="å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹">å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹</h3>

<table>
<thead>
<tr>
<th align="center">å€¼ç±»å‹</th>
<th align="center">å¼•ç”¨ç±»å‹</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">åŸºæœ¬æ•°æ®ç±»å‹</br>æ•°ç»„</br>ç»“æ„ä½“</td>
<td align="center">æŒ‡é’ˆ</br>slice</br>map</br>channel</br>interface</td>
</tr>

<tr>
<td align="center">å˜é‡ç›´æ¥å­˜å‚¨å€¼ï¼Œå†…å­˜é€šå¸¸åœ¨æ ˆä¸­åˆ†é…</td>
<td align="center">å˜é‡å­˜å‚¨çš„å€¼æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€å¯¹åº”çš„ç©ºé—´ æ‰çœŸæ­£å­˜å‚¨æ•°æ®ï¼Œå†…å­˜é€šå¸¸åœ¨å †ä¸Šåˆ†é…ï¼Œå½“æ²¡æœ‰ä»»ä½•å˜é‡å¼•ç”¨è¿™ä¸ªåœ°å€æ—¶ï¼Œä¼šè¢«GCå›æ”¶</td>
</tr>
</tbody>
</table>

<hr />

<h1 id="å¸¸é‡">ğŸµå¸¸é‡</h1>

<ul>
<li>å¸¸é‡æ˜¯æ— æ³•æ”¹å˜çš„ï¼Œåœ¨å£°æ˜æ—¶å°±å·²ç¡®å®šå¥½å…·ä½“çš„å€¼ï¼Œé€šå¸¸åŒ…å«åŸºæœ¬æ•°æ®ç±»å‹å’Œå­—ç¬¦ä¸²ç±»å‹</li>
<li>ç”¨å…³é”®å­—constä¿®é¥°</li>
<li>å¸¸é‡å¯ä½œæšä¸¾</li>
</ul>

<h3 id="å¸¸é‡å®šä¹‰">å¸¸é‡å®šä¹‰</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="nx">pacakge</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">const</span><span class="p">(</span>
  <span class="nx">Country</span> <span class="p">=</span> <span class="s">&#34;China&#34;</span>
  <span class="nx">Weight</span> <span class="p">=</span> <span class="mi">10</span>
<span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="å¸¸é‡æ¨¡æ‹Ÿæšä¸¾">å¸¸é‡æ¨¡æ‹Ÿæšä¸¾</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">Weight</span> <span class="kt">int</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">State1</span> <span class="nx">Weight</span> <span class="p">=</span> <span class="kc">iota</span> <span class="c1">//å¼€å§‹ç”Ÿæˆæšä¸¾å¸¸é‡ï¼ŒState1ä¸º0
</span><span class="c1"></span>	<span class="nx">State2</span>
	<span class="nx">State3</span>
	<span class="nx">State4</span>
	<span class="nx">State5</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d, %d, %d, %d, %d\n&#34;</span><span class="p">,</span><span class="nx">State1</span><span class="p">,</span> <span class="nx">State2</span><span class="p">,</span> <span class="nx">State3</span><span class="p">,</span> <span class="nx">State4</span><span class="p">,</span> <span class="nx">State5</span><span class="p">)</span>

  <span class="kd">var</span> <span class="nx">level</span> <span class="nx">Weight</span> <span class="p">=</span> <span class="nx">State5</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;level is: %d\n&#34;</span><span class="p">,</span><span class="nx">level</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">0, 1, 2, 3, <span class="m">4</span>
level is: <span class="m">4</span></code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/golang/" term="golang" label="golang" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/go%E5%9F%BA%E7%A1%80/" term="goåŸºç¡€" label="goåŸºç¡€" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Golangç³»åˆ—æ•™ç¨‹--åŸºç¡€æ¦‚å¿µ</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/golang-basic-concetps/" />
            <id>https://jjmeg.github.io/posts/golang-basic-concetps/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2019-12-10T13:47:14+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[ğŸ“œæœ¬æ–‡å†…å®¹ ğŸ‘‰åŒ…çš„æ¦‚å¿µpackage ğŸ‘‰ Goç¨‹åºçš„ç»“æ„ ğŸ‘‰ Goçš„æ‰§è¡Œ ğŸ‘‰ å¯è§æ€§è§„åˆ™ ğŸ‘‰ Goçš„ç¼–â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[

<h1 id="æœ¬æ–‡å†…å®¹">ğŸ“œæœ¬æ–‡å†…å®¹</h1>

<ul>
<li><p>ğŸ‘‰<a href="#åŒ…çš„æ¦‚å¿µpackage">åŒ…çš„æ¦‚å¿µpackage</a></p></li>

<li><p>ğŸ‘‰ <a href="#Goç¨‹åºçš„ç»“æ„">Goç¨‹åºçš„ç»“æ„</a></p></li>

<li><p>ğŸ‘‰ <a href="#Goçš„æ‰§è¡Œ">Goçš„æ‰§è¡Œ</a></p></li>

<li><p>ğŸ‘‰ <a href="#å¯è§æ€§è§„åˆ™">å¯è§æ€§è§„åˆ™</a></p></li>

<li><p>ğŸ‘‰ <a href="#Goçš„ç¼–è¯‘è¿‡ç¨‹">Goçš„ç¼–è¯‘è¿‡ç¨‹</a></p></li>
</ul>

<hr />

<h3 id="åŒ…çš„æ¦‚å¿µpackage">ğŸ‘½åŒ…çš„æ¦‚å¿µpackage</h3>

<ul>
<li>æ¯ä¸ªgoæ–‡ä»¶ä»…å±äºä¸€ä¸ªåŒ…ï¼Œä¸€ä¸ªåŒ…å¯ä»¥å¤šä¸ªgoæ–‡ä»¶</li>
<li>æ‰€æœ‰åŒ…åä¸ºå°å†™å­—æ¯</li>
<li>åŒ…ç¼–è¯‘å®Œä¸ºpack1.aï¼ŒåŒ…çš„ä¾èµ–å…³ç³»å†³å®šç¨‹åºæ„å»ºé¡ºåºï¼ŒåŒ…ä¸ºç¼–è¯‘å•å…ƒï¼Œæ¯ä¸ªç›®å½•åªåŒ…å«ä¸€ä¸ªåŒ…</li>
<li><strong>åŒ…å†…æ–‡ä»¶æˆ–é‡æ–°ç¼–è¯‘æœ‰ä¿®æ”¹ï¼Œå¼•ç”¨è¯¥åŒ…çš„å…¶ä»–ç¨‹åºä¹Ÿè¦é‡æ–°ç¼–è¯‘</strong></li>
<li>åŒ…åä¹Ÿå¯ä½œä¸ºå‘½åç©ºé—´ä½¿ç”¨ï¼Œegï¼špack1.Id, pack2.Id</li>
<li>åŒ…åè‡ªå‘½åï¼Œegï¼šimport fm &quot;fmt&quot;  fm.Println(&quot;hello&quot;)</li>
<li>å¯¼å…¥æœªä½¿ç”¨çš„åŒ…æ—¶ä¼šæŠ¥é”™ï¼Œå¯¼å…¥åŒ…çš„è¯­å¥åå¯ä»¥å®šä¹‰å…¨å±€å˜é‡ï¼Œåœ¨æœ¬åŒ…å†…éƒ½å¯è®¿é—®</li>
<li>åŒ…ç¼–è¯‘å®Œä¸ºpack1.a</li>
</ul>

<h3 id="goç¨‹åºçš„ç»“æ„">ğŸ‘½Goç¨‹åºçš„ç»“æ„</h3>

<ol>
<li>importåŒ…</li>
<li>å£°æ˜å¸¸é‡ã€å…¨å±€å˜é‡ã€ç±»å‹å®šä¹‰</li>

<li><p>init()è‹¥å«æœ‰ï¼Œåˆ™åŒ…é¦–å…ˆæ‰§è¡Œinit()ä¸”åªæ‰§è¡Œä¸€æ¬¡,<strong>ä»»ä½•æ–‡ä»¶å¯ä»¥åŒ…å«ä»»æ„å¤šä¸ªinit()ï¼ŒæŒ‰ç…§å£°æ˜çš„é¡ºåºæ‰§è¡Œ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Go" data-lang="Go"><span class="kd">func</span> <span class="nf">init</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*........*/</span> <span class="p">}</span></code></pre></td></tr></table>
</div>
</div></li>

<li><p>è‹¥æ˜¯mainåŒ…ï¼Œæ­¤å¤„å†™mainå‡½æ•°</p></li>

<li><p>å…¶ä»–å‡½æ•°</p></li>
</ol>

<h3 id="goçš„æ‰§è¡Œ">ğŸ‘½Goçš„æ‰§è¡Œ</h3>

<ol>
<li>æŒ‰é¡ºåºå¯¼å…¥æ‰€æœ‰è¢«mainåŒ…å¼•ç”¨çš„åŒ…ï¼Œæ¯ä¸ªåŒ…æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š

<ul>
<li>è‹¥è¯¥åŒ…åˆå¼•å…¥äº†å…¶ä»–åŒ…ï¼Œä»1ç»§ç»­ï¼Œä½†æ¯ä¸ªåŒ…åªèƒ½å¯¼å…¥ä¸€æ¬¡</li>
<li>ç›¸åçš„é¡ºåºåˆå§‹åŒ–å˜é‡ã€å¸¸é‡ï¼Œæœ‰init()æ‰§è¡Œinit()</li>
</ul></li>
<li>å›åˆ°mainæ‰§è¡Œä¸€æ ·çš„åˆå§‹åŒ–å’Œinit()è¿‡ç¨‹</li>
</ol>

<h3 id="å¯è§æ€§è§„åˆ™">ğŸ‘½å¯è§æ€§è§„åˆ™</h3>

<ul>
<li>ç±»ä¼¼javaä¸­çš„publicã€privateå…³é”®å­—</li>
<li>æ ‡è¯†ç¬¦ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œå¤–éƒ¨åŒ…å³å¯è®¿é—®ï¼Œegï¼šstruct Person{}ï¼ŒPersonå¯¹è±¡å³å¯è¢«å¤–éƒ¨åŒ…è®¿é—®(å¯¼å‡º/public)</li>
<li>ä»¥å°å†™å­—æ¯ï¼Œå³privateï¼Œä»…åŒ…å†…å¯è§å¯ç”¨</li>
<li>åœ¨å¯¼å…¥ä¸€ä¸ªå¤–éƒ¨åŒ…åï¼Œåªèƒ½å¤Ÿè®¿é—®è¯¥åŒ…ä¸­å¯¼å‡ºçš„å¯¹è±¡</li>
</ul>

<h3 id="goçš„ç¼–è¯‘è¿‡ç¨‹">ğŸ‘½Goçš„ç¼–è¯‘è¿‡ç¨‹</h3>

<ul>
<li>run: compile and run Go program

<ul>
<li>go runæ‰§è¡Œå®Œåç”Ÿæˆå½’æ¡£æ–‡ä»¶å’Œå¯æ‰§è¡Œæ–‡ä»¶</li>
<li>go run -aå¼ºåˆ¶ç¼–è¯‘æ‰€æœ‰ä»£ç </li>
</ul></li>
<li>build: compile packages and dependencies

<ul>
<li>go buildåœ¨ç›®å½•ä¸­æ‰§è¡Œï¼Œå°†äº§ç”Ÿä¸ç›®å½•åŒåçš„å¯æ‰§è¡Œæ–‡ä»¶</li>
<li>è‹¥ç¼–è¯‘åº“æºç æ–‡ä»¶ï¼Œbuildå®Œä¸äº§ç”Ÿä»»ä½•ç»“æœï¼Œbuildåªæ£€æŸ¥åº“æºç æ–‡ä»¶çš„æœ‰æ•ˆæ€§ï¼Œä¸è¾“å‡ºä»»ä½•æ–‡ä»¶</li>
<li>go build åä¸æ¥è·¯å¾„åˆ™é»˜è®¤ç¼–è¯‘çš„åŒ…çš„è·¯å¾„ä¸ºå½“å‰ç›®å½•</li>
<li>-o æŒ‡å®šè¾“å‡ºåç§°</li>
<li>è¿‡ç¨‹ä¸go runç›¸ä¼¼ï¼Œä½†æœ€åä¼šå°†ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ç§»åŠ¨(ä¸æ˜¯å¤åˆ¶ï¼Œgo runäº§ç”Ÿçš„exeä¸å­˜åœ¨äº†)åˆ°ç›®å½•ä¸‹</li>
</ul></li>
<li>install: download and install packages and dependencies

<ul>
<li>ç¼–è¯‘å¹¶å®‰è£…æŒ‡å®šçš„ä»£ç åŒ…ã€ä¾èµ–åŒ…</li>
<li>go installå°†buildå‘½ä»¤ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ç§»åŠ¨åˆ°GOPATH/binä¸‹</li>
<li>è¿‡ç¨‹ä¸go buildç±»ä¼¼ï¼Œä½†æœ€åå®‰è£…ç¼–è¯‘åçš„ç»“æœæ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</li>
<li>å‘½ä»¤åå¯æ¥è·¯å¾„</li>
<li>ä¸æ”¯æŒå¯¹åº“æºç æ–‡ä»¶çš„å®‰è£…</li>
</ul></li>
<li>get: download and install packages and dependencies

<ul>
<li>go getä»è¿œç¨‹ä»“åº“ä¸‹è½½</li>
<li>-dåªåšä¸‹è½½æ“ä½œä¸å®‰è£…</li>
</ul></li>
</ul>
]]></content>
            
            
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/golang/" term="golang" label="golang" />
                            
                        
                            
                            
                            
                                <category scheme="https://jjmeg.github.io/tags/go%E5%9F%BA%E7%A1%80/" term="goåŸºç¡€" label="goåŸºç¡€" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Hello World</title>
            <link rel="alternate" type="text/html" href="https://jjmeg.github.io/posts/hello-world/" />
            <id>https://jjmeg.github.io/posts/hello-world/</id>
            <updated>2020-03-30T23:31:24+08:00</updated>
            <published>2019-12-09T18:14:09+08:00</published>
            <author>
                    <name>JJMeg</name>
                    <uri>https://jjmeg.github.io/</uri>
                    <email>jjmeg.he@gmail.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[This is a test article. ã€ŒWhatã€ é¦–æ¬¡å°è¯•åšå®¢æ˜¯åœ¨2017å¹´ ğŸ‘‰ åŸºäºHexo ğŸ‘‰ JJMeg0 å­¦ä¸šç¹å¿™ï¼ˆæ‹–æ‹‰æœºæœ¬â€¦â€¦]]></summary>
            
                <content type="html"><![CDATA[<p>This is a <del>test</del> article.</p>

<p><br />
ã€ŒWhatã€</p>

<p>é¦–æ¬¡å°è¯•åšå®¢æ˜¯åœ¨2017å¹´ ğŸ‘‰ åŸºäº<a href="https://hexo.io/" target="_blank">Hexo</a> ğŸ‘‰ <a href="https://github.com/JJMeg/JJMeg0.github.io" target="_blank">JJMeg0</a></p>

<p><del>å­¦ä¸šç¹å¿™</del>ï¼ˆæ‹–æ‹‰æœºæœ¬æœºğŸ’…ï¼‰ï¼Œé‚è½ç°...</p>

<p><del>ç¤¾ï¼ˆæ¯•ï¼‰ä¼šï¼ˆä¸šï¼‰äººï¼ˆäº†ï¼‰</del>ï¼ˆäº’è”ç½‘ğŸ¶ï¼‰å¼€å§‹è¥ä¸šğŸ•˜...</p>

<p><br />
ã€ŒWhyã€</p>

<p>äº‘è®¡ç®—è¡Œä¸šèŒæ–°ï¼Œè¿‘åŠå¹´æ¥è§¦<a href="https://golang.org/" target="_blank">Go</a>ï¼Œå¬é—»<a href="https://gohugo.io/" target="_blank">Hugo</a>æ„å»ºç¼–è¯‘é€Ÿåº¦ï¼Œï¼ˆæ“æ‰‹ï¼‰å°è¯•âš¡ï¼Œä½“éªŒ hinğŸ‘Œã€‚</p>

<p><br />
ã€ŒHowã€</p>

<p>ğŸ”ä¸»é¢˜é€‰ç”¨ğŸ‘» <a href="https://io-oi.me/" target="_blank">ä¸€ä¼‘å„¿</a> ğŸ‘»è¶…çº§ä¼˜ç§€çš„ğŸ’– <a href="https://github.com/reuixiy/hugo-theme-meme" target="_blank">meme</a> ğŸ’–ï¼Œ</p>

<p>âœ’ ç¼–è¾‘å™¨ä¸º <a href="https://atom.io/" target="_blank">Atom</a> âœ’ï¼Œå†™ä½œç”± <a href="https://www.markdown.cn/" target="_blank">Markdown</a> æ”¯æŒã€‚</p>

<p><br />
<br />
<center>Enjoy it!</center></p>
]]></content>
            
            
            
            
            
                
                    
                
                    
                
            
        </entry>
    
</feed>